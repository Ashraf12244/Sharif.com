<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sharif.com — Ecommerce</title>
  <style>
    :root {
      --brand: #007bff;
      --bg: #f5f6f8;
      --text: #222;
      --card: #fff;
      --danger: #dc3545;
      --success: #28a745;
    }
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    header {
      background: var(--brand);
      color: #fff;
      padding: 15px;
      position: sticky;
      top: 0;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      z-index: 100;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .nav {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    .logo {
      font-weight: bold;
      font-size: 22px;
    }
    .language-selector {
      display: flex;
      gap: 10px;
    }
    .lang-btn {
      background: transparent;
      color: white;
      border: 1px solid white;
      border-radius: 5px;
      padding: 5px 10px;
      cursor: pointer;
      font-size: 12px;
    }
    .lang-btn.active {
      background: white;
      color: var(--brand);
    }
    .btn {
      background: #fff;
      color: var(--brand);
      border: 0;
      border-radius: 5px;
      padding: 8px 15px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s;
    }
    .btn:hover {
      opacity: 0.9;
    }
    .btn.ghost {
      background: transparent;
      color: #fff;
      border: 1px solid #fff;
    }
    .btn.danger {
      background: var(--danger);
      color: #fff;
    }
    .btn.success {
      background: var(--success);
      color: #fff;
    }
    .wrap {
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .tabs {
      display: flex;
      gap: 10px;
    }
    .tab {
      padding: 8px 15px;
      border-radius: 5px;
      background: rgba(255,255,255,0.2);
      cursor: pointer;
      transition: all 0.3s;
    }
    .tab:hover {
      background: rgba(255,255,255,0.3);
    }
    .tab.active {
      background: #fff;
      color: var(--brand);
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    @media (max-width: 768px) {
      .grid {
        grid-template-columns: 1fr;
      }
      .nav {
        flex-direction: row;
        align-items: center;
      }
    }
    .card {
      background: var(--card);
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      transition: transform 0.3s;
    }
    .card:hover {
      transform: translateY(-5px);
    }
    .card img {
      width: 100%;
      height: 200px;
      object-fit: contain;
      margin-bottom: 10px;
    }
    .title {
      font-weight: bold;
      margin: 10px 0;
      font-size: 18px;
    }
    .price {
      font-size: 18px;
      font-weight: bold;
      color: var(--brand);
      margin: 10px 0;
    }
    .description {
      color: #666;
      margin: 10px 0;
      font-size: 14px;
    }
    #cartPanel {
      display: none;
      position: fixed;
      top: 0;
      right: 0;
      width: 350px;
      height: 100%;
      background: #fff;
      padding: 20px;
      box-shadow: -2px 0 10px rgba(0,0,0,0.1);
      overflow-y: auto;
      z-index: 1000;
    }
    #orderForm {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 2000;
      align-items: center;
      justify-content: center;
    }
    #orderFormContent {
      background: #fff;
      padding: 30px;
      width: 90%;
      max-width: 500px;
      border-radius: 10px;
      position: relative;
    }
    .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: var(--danger);
      color: white;
      border: none;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: bold;
    }
    .setgrid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 15px;
      margin: 20px 0;
    }
    .setgrid input, .setgrid textarea, .setgrid select {
      width: 100%;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ddd;
      font-family: inherit;
    }
    .setgrid textarea {
      min-height: 100px;
      resize: vertical;
    }
    .form-group {
      margin-bottom: 15px;
    }
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    .step {
      display: none;
    }
    .step.active {
      display: block;
    }
    .step-nav {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    .hidden {
      display: none;
    }
    .seller-stage {
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid #eee;
    }
    .seller-stage:last-child {
      border-bottom: none;
    }
    #passwordPrompt {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 3000;
      align-items: center;
      justify-content: center;
    }
    #passwordPromptContent {
      background: #fff;
      padding: 30px;
      border-radius: 10px;
      width: 90%;
      max-width: 400px;
    }
    .product-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }
    .product-actions button {
      flex: 1;
    }
    body[dir="rtl"] {
      text-align: right;
    }
    body[dir="ltr"] {
      text-align: left;
    }
    .three-line-menu {
      display: none;
      position: fixed;
      top: 70px;
      right: 20px;
      background: white;
      border-radius: 5px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      z-index: 1000;
      padding: 10px;
      min-width: 200px;
    }
    .three-line-menu.active {
      display: block;
    }
    .three-line-menu button {
      display: block;
      width: 100%;
      padding: 10px;
      text-align: left;
      border: none;
      background: none;
      cursor: pointer;
    }
    .three-line-menu button:hover {
      background: #f5f5f5;
    }
    .menu-btn {
      background: none;
      border: none;
      color: white;
      font-size: 20px;
      cursor: pointer;
      padding: 5px;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
    // Initialize EmailJS with your credentials
    (function() {
      emailjs.init('DapdU3gPmJ8ymUdD2');
    })();
  </script>
</head>
<body>
  <header>
    <div class="logo" id="storeName">Sharif.com</div>
    <div class="nav">
      <button class="menu-btn" onclick="toggleMenu()">☰</button>
      <button class="btn ghost" onclick="toggleCart()" id="cartBtn">View Cart</button>
      <div class="language-selector">
        <button class="lang-btn active" data-lang="en">EN</button>
        <button class="lang-btn" data-lang="ur">اردو</button>
        <button class="lang-btn" data-lang="mm">မြန်မာ</button>
      </div>
    </div>
    <div class="three-line-menu" id="threeLineMenu">
      <button onclick="showPage('home')" id="menuHome">Home</button>
      <button onclick="showPage('settings')" id="menuSettings">Settings</button>
    </div>
  </header>

  <main class="wrap">
    <!-- HOME PAGE - PRODUCTS ONLY -->
    <section id="pageHome" class="page active">
      <h2 id="productsTitle">Our Products</h2>
      <div class="grid" id="productsGrid"></div>
    </section>

    <!-- SETTINGS PAGE (HIDDEN BY DEFAULT) -->
    <section id="pageSettings" class="page">
      <h2>Store Settings</h2>
      <div class="setgrid">
        <input type="text" placeholder="Store Name" id="setStoreName" value="Sharif.com">
        <input type="text" placeholder="Currency" id="setCurrency" value="₹">
        <textarea placeholder="Store Notice" id="setNotice"></textarea>
      </div>
      <button class="btn" onclick="saveStoreSettings()">Save Settings</button>
      <button class="btn danger" onclick="resetStoreSettings()">Reset</button>

      <h2>Product Management</h2>
      <div class="setgrid">
        <input type="text" placeholder="Product Title" id="adminTitle">
        <input type="text" placeholder="Brand" id="adminBrand">
        <textarea placeholder="Description" id="adminDescription"></textarea>
        <input type="number" placeholder="Price" id="adminPrice">
        <input type="file" id="imageInput" accept="image/*">
        <img id="imagePreview" src="" alt="Preview" style="max-width: 200px; display: none; margin-top: 10px;">
      </div>
      <button class="btn" id="adminAddProductBtn" onclick="showPasswordPrompt('addProduct')">Add Product</button>

      <h2>Current Products</h2>
      <div class="grid" id="adminProductList"></div>

      <h2>Address Book</h2>
      <div class="setgrid">
        <input type="text" placeholder="Name" id="custName">
        <input type="email" placeholder="Email" id="custEmail">
        <input type="tel" placeholder="Phone" id="custPhone">
        <textarea placeholder="Full Address" id="custAddress"></textarea>
      </div>
      <button class="btn" onclick="saveAddress()">Save Address</button>
      <button class="btn danger" onclick="resetAddress()">Reset</button>

      <h2>Create Seller Account</h2>
      <div class="seller-stage">
        <h3>Step 1: Basic Information</h3>
        <div class="setgrid step active" id="sellerStep1">
          <input type="text" placeholder="Full Name" id="sellerName">
          <input type="email" placeholder="Email" id="sellerEmail">
          <input type="tel" placeholder="Phone" id="sellerPhone">
          <div class="step-nav">
            <button class="btn" onclick="nextSellerStep(1, 2)">Next Step</button>
          </div>
        </div>
      </div>

      <div class="seller-stage">
        <h3>Step 2: Additional Information</h3>
        <div class="setgrid step" id="sellerStep2">
          <textarea placeholder="Full Address" id="sellerAddress"></textarea>
          <input type="text" placeholder="Bank Account Details" id="sellerBank">
          <input type="text" placeholder="National ID Number" id="sellerID">
          <div class="step-nav">
            <button class="btn ghost" onclick="prevSellerStep(2, 1)">Previous Step</button>
            <button class="btn success" id="createSellerBtn" onclick="createSellerAccount()">Create Account</button>
          </div>
        </div>
      </div>

      <h2>Pending Seller Accounts</h2>
      <div class="grid" id="pendingSellers"></div>
    </section>
  </main>

  <!-- Cart Panel -->
  <div id="cartPanel">
    <h3 id="cartTitle">Your Cart</h3>
    <div id="cartItems"></div>
    <div id="cartTotal" style="font-weight: bold; margin: 15px 0;"></div>
    <button class="btn danger" onclick="clearCart()" id="clearCartBtn">Clear Cart</button>
    <button class="btn success" onclick="showOrderForm()" id="orderNowBtn">Order Now</button>
  </div>

  <!-- Order Form -->
  <div id="orderForm">
    <div id="orderFormContent">
      <button class="close-btn" onclick="hideOrderForm()">×</button>
      <h3 id="orderTitle">Order Details</h3>
      <form id="orderFormDetails">
        <div class="form-group">
          <label for="orderName" id="nameLabel">Name</label>
          <input type="text" id="orderName" name="name" required>
        </div>
        <div class="form-group">
          <label for="orderEmail" id="emailLabel">Email</label>
          <input type="email" id="orderEmail" name="email" required>
        </div>
        <div class="form-group">
          <label for="orderPhone" id="phoneLabel">Phone</label>
          <input type="tel" id="orderPhone" name="phone" required>
        </div>
        <div class="form-group">
          <label for="orderAddress" id="addressLabel">Address</label>
          <textarea id="orderAddress" name="address" required></textarea>
        </div>
        <div class="form-group">
          <label id="orderSummaryLabel">Order Summary</label>
          <div id="orderSummary" style="padding: 10px; background: #f5f5f5; border-radius: 5px;"></div>
        </div>
        <input type="hidden" name="order_details" id="orderDetails">
        <input type="hidden" name="order_total" id="orderTotal">
        <button type="submit" class="btn success" style="width: 100%; margin-top: 15px;" id="submitOrderBtn">Place Order</button>
      </form>
    </div>
  </div>

  <!-- Password Prompt -->
  <div id="passwordPrompt">
    <div id="passwordPromptContent">
      <h3 id="passwordPromptTitle">Admin Password Required</h3>
      <input type="password" id="adminPasswordInput" placeholder="Enter password" style="width: 100%; padding: 10px; margin: 15px 0;">
      <button class="btn" onclick="verifyPassword()" id="verifyPasswordBtn">Verify</button>
      <button class="btn danger" onclick="hidePasswordPrompt()" id="cancelPasswordBtn">Cancel</button>
      <p id="passwordError" style="color: var(--danger); margin-top: 10px; display: none;">Wrong password!</p>
    </div>
  </div>

  <script>
    // Admin Authentication
    const ADMIN_PASSWORD = '@122@44@good';
    let isAdmin = localStorage.getItem('isAdmin') === 'true';

    // Current Language
    let currentLanguage = 'en';
    let currentAction = '';

    // State Management
    let products = JSON.parse(localStorage.getItem('products')) || [];
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let settings = JSON.parse(localStorage.getItem('settings')) || { storeName: 'Sharif.com', currency: '₹', notice: '' };
    let addresses = JSON.parse(localStorage.getItem('addresses')) || [];
    let pendingSellers = JSON.parse(localStorage.getItem('pendingSellers')) || [];
    let approvedSellers = JSON.parse(localStorage.getItem('approvedSellers')) || [];

    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
      renderProducts();
      renderAdminProducts(); // New: Render admin products on load
      updateStoreName();
      setupLanguageButtons();
      setupImagePreview();
      renderPendingSellers(); // Initial render for pending sellers
      
      // Check if admin is already logged in
      if (!isAdmin) {
        document.getElementById('pageSettings').style.display = 'none';
      }
    });

    // Setup image preview for product addition
    function setupImagePreview() {
      document.getElementById('imageInput').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function() {
            document.getElementById('imagePreview').src = reader.result;
            document.getElementById('imagePreview').style.display = 'block';
          };
          reader.readAsDataURL(file);
        }
      });
    }

    // Add Product Function
    function addProduct() {
      const title = document.getElementById('adminTitle').value.trim();
      const brand = document.getElementById('adminBrand').value.trim();
      const description = document.getElementById('adminDescription').value.trim();
      const price = parseFloat(document.getElementById('adminPrice').value);
      const image = document.getElementById('imagePreview').src; // Base64 data URL from preview

      if (!title || !brand || !description || isNaN(price) || price <= 0 || !image || image === '') {
        alert(currentLanguage === 'ur' ? 'براہ کرم تمام ضروری فیلڈز کو پُر کریں اور درست پرائس داخل کریں' : 
              currentLanguage === 'mm' ? 'ကျေးဇူးပြု၍ လိုအပ်သော အကွက်များအားလုံးကို ဖြည့်ပါ နှင့် မှန်ကန်သော စျေးနှုန်း ထည့်ပါ' : 
              'Please fill all required fields and enter a valid price');
        return;
      }

      // Create product object (including brand for display)
      const newProduct = {
        title: `${brand} ${title}`, // Combine brand and title for display
        description,
        price,
        image // Store base64 image data
      };

      products.push(newProduct);
      localStorage.setItem('products', JSON.stringify(products));
      renderProducts();
      renderAdminProducts(); // New: Render admin products after adding

      // Clear form inputs
      document.getElementById('adminTitle').value = '';
      document.getElementById('adminBrand').value = '';
      document.getElementById('adminDescription').value = '';
      document.getElementById('adminPrice').value = '';
      document.getElementById('imageInput').value = '';
      document.getElementById('imagePreview').src = '';
      document.getElementById('imagePreview').style.display = 'none';

      alert(currentLanguage === 'ur' ? 'پروڈکٹ کامیابی سے شامل کی گئی!' : 
            currentLanguage === 'mm' ? 'ထုတ်ကုန်ကို အောင်မြင်စွာ ထည့်ပြီးပါပြီ!' : 
            'Product added successfully!');
    }

    // New Function: Render Admin Products
    function renderAdminProducts() {
      const adminProductList = document.getElementById('adminProductList');
      adminProductList.innerHTML = '';
      
      products.forEach((product, index) => {
        const productCard = document.createElement('div');
        productCard.className = 'card';
        productCard.innerHTML = `
          <img src="${product.image || 'https://via.placeholder.com/300'}" alt="${product.title}">
          <div class="title">${product.title}</div>
          <div class="description">${product.description || ''}</div>
          <div class="price">${settings.currency}${product.price.toLocaleString()}</div>
          <div class="product-actions">
            <button class="btn danger" onclick="deleteProduct(${index})">Delete</button>
          </div>
        `;
        adminProductList.appendChild(productCard);
      });
    }

    // New Function: Delete Product
    function deleteProduct(index) {
      if (confirm(currentLanguage === 'ur' ? 'کیا آپ واقعی اس پروڈکٹ کو حذف کرنا چاہتے ہیں؟' : 
                  currentLanguage === 'mm' ? 'ဤထုတ်ကုန်ကိုဖျက်ရန်သေချာပါသလား။' : 
                  'Are you sure you want to delete this product?')) {
        products.splice(index, 1);
        localStorage.setItem('products', JSON.stringify(products));
        renderProducts();
        renderAdminProducts();
      }
    }

    // Toggle three-line menu
    function toggleMenu() {
      document.getElementById('threeLineMenu').classList.toggle('active');
    }

    // Show specific page
    function showPage(page) {
      document.querySelectorAll('.page').forEach(p => {
        p.style.display = 'none';
      });
      document.getElementById(`page${page.charAt(0).toUpperCase() + page.slice(1)}`).style.display = 'block';
      toggleMenu();
      
      if (page === 'settings' && !isAdmin) {
        showPasswordPrompt('accessSettings');
      } else if (page === 'settings') {
        renderAdminProducts(); // Render admin products when opening settings
      }
    }

    // Language Switching
    function setupLanguageButtons() {
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          // Update active language button
          document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          
          // Set new language
          currentLanguage = this.dataset.lang;
          
          // Update text direction
          document.body.dir = currentLanguage === 'ur' ? 'rtl' : 'ltr';
          
          // Update all translatable elements
          updateLanguage();
        });
      });
    }

    // Update all elements with language data attributes
    function updateLanguage() {
      document.querySelectorAll('[data-en], [data-ur], [data-mm]').forEach(el => {
        if (el.dataset[currentLanguage]) {
          if (el.tagName === 'INPUT' && el.type === 'text' || el.tagName === 'INPUT' && el.type === 'email' || el.tagName === 'INPUT' && el.type === 'tel' || el.tagName === 'TEXTAREA') {
            el.placeholder = el.dataset[currentLanguage];
          } else {
            el.textContent = el.dataset[currentLanguage];
          }
        }
      });
    }

    // Product Management
    function renderProducts() {
      const productsGrid = document.getElementById('productsGrid');
      productsGrid.innerHTML = '';
      
      products.forEach((product, index) => {
        const productCard = document.createElement('div');
        productCard.className = 'card';
        productCard.innerHTML = `
          <img src="${product.image || 'https://via.placeholder.com/300'}" alt="${product.title}">
          <div class="title">${product.title}</div>
          <div class="description">${product.description || ''}</div>
          <div class="price">${settings.currency}${product.price.toLocaleString()}</div>
          <div class="product-actions">
            <button class="btn" onclick="addToCart(${index})">Add to Cart</button>
            <button class="btn success" onclick="showOrderForm(${index})">Buy Now</button>
          </div>
        `;
        productsGrid.appendChild(productCard);
      });
    }

    // Cart Management
    function addToCart(productIndex) {
      const existingItem = cart.find(item => item.productIndex === productIndex);
      
      if (existingItem) {
        existingItem.quantity++;
      } else {
        cart.push({
          productIndex: productIndex,
          quantity: 1
        });
      }
      
      saveCart();
      renderCart();
      alert(currentLanguage === 'ur' ? 'پروڈکٹ کارٹ میں شامل کی گئی!' : 
            currentLanguage === 'mm' ? 'ထုတ်ကုန်ကိုစျေးခြင်းတောင်းထဲသို့ထည့်လိုက်ပြီ' : 'Product added to cart!');
    }

    function renderCart() {
      const cartItems = document.getElementById('cartItems');
      cartItems.innerHTML = '';
      let total = 0;
      
      cart.forEach((item, index) => {
        const product = products[item.productIndex];
        const itemTotal = product.price * item.quantity;
        total += itemTotal;
        
        const cartItem = document.createElement('div');
        cartItem.className = 'cart-item';
        cartItem.style.marginBottom = '10px';
        cartItem.style.paddingBottom = '10px';
        cartItem.style.borderBottom = '1px solid #eee';
        cartItem.innerHTML = `
          <div style="font-weight: bold;">${product.title}</div>
          <div>${settings.currency}${product.price.toLocaleString()} x ${item.quantity} = ${settings.currency}${itemTotal.toLocaleString()}</div>
          <div style="display: flex; gap: 5px; margin-top: 5px;">
            <input type="number" value="${item.quantity}" min="1" 
                   onchange="updateQuantity(${index}, parseInt(this.value))" style="width: 50px; text-align: center;">
            <button class="btn danger" onclick="removeFromCart(${index})" style="padding: 2px 5px;">
              ${currentLanguage === 'ur' ? 'ختم کریں' : currentLanguage === 'mm' ? 'ဖျက်မည်' : 'Remove'}
            </button>
          </div>
        `;
        cartItems.appendChild(cartItem);
      });
      
      document.getElementById('cartTotal').textContent = 
        `${currentLanguage === 'ur' ? 'کل رقم' : currentLanguage === 'mm' ? 'စုစုပေါင်းပမာဏ' : 'Total'}: ${settings.currency}${total.toLocaleString()}`;
      
      // Update order form hidden fields
      document.getElementById('orderDetails').value = cart.map(item => {
        const product = products[item.productIndex];
        return `${product.title} x ${item.quantity} = ${settings.currency}${(product.price * item.quantity).toLocaleString()}`;
      }).join('\n');
      
      document.getElementById('orderTotal').value = `${settings.currency}${total.toLocaleString()}`;
      
      // Update order summary
      document.getElementById('orderSummary').innerHTML = cart.map(item => {
        const product = products[item.productIndex];
        return `<div>${product.title} x ${item.quantity} = ${settings.currency}${(product.price * item.quantity).toLocaleString()}</div>`;
      }).join('') + 
      `<div style="font-weight: bold; margin-top: 10px;">
        ${currentLanguage === 'ur' ? 'کل رقم' : currentLanguage === 'mm' ? 'စုစုပေါင်းပမာဏ' : 'Total'}: ${settings.currency}${total.toLocaleString()}
      </div>`;
    }

    // Order Management with EmailJS Integration
    document.getElementById('orderFormDetails').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const name = this.name.value;
      const email = this.email.value;
      const phone = this.phone.value;
      const address = this.address.value;
      const orderDetails = document.getElementById('orderDetails').value;
      const orderTotal = document.getElementById('orderTotal').value;
      
      if (!name || !phone || !address) {
        alert(currentLanguage === 'ur' ? 'براہ کرم تمام ضروری فیلڈز کو پُر کریں' : 
              currentLanguage === 'mm' ? 'ကျေးဇူးပြု၍လိုအပ်သောအကွက်များအားလုံးကိုဖြည့်ပါ' : 
              'Please fill all required fields');
        return;
      }
      
      // Save address to address book
      const newAddress = {
        name,
        email,
        phone,
        address,
        date: new Date().toLocaleString()
      };
      addresses.push(newAddress);
      localStorage.setItem('addresses', JSON.stringify(addresses));
      
      // Send email notification to admin (ashraf97941@gmail.com)
      emailjs.send('service_hwvi11g', 'template_kp1zovr', {
        to_email: 'ashraf97941@gmail.com',
        from_name: name,
        from_email: email,
        phone: phone,
        address: address,
        order_details: orderDetails,
        order_total: orderTotal,
        message: `New order from ${name} at ${new Date().toLocaleString()}`
      }).then(() => {
        alert(currentLanguage === 'ur' ? 'آرڈر کامیابی سے جمع کرایا گیا! ہم جلد ہی آپ سے رابطہ کریں گے۔' : 
              currentLanguage === 'mm' ? 'အော်ဒါအောင်မြင်စွာတင်ပြီးပါပြီ! မကြာမီသင့်ကိုဆက်သွယ်ပါမည်။' : 
              'Order placed successfully! We will contact you soon.');
        
        // Clear cart if this was a cart order
        if (cart.length > 0) {
          cart = [];
          saveCart();
          renderCart();
        }
        
        hideOrderForm();
      }, (err) => {
        console.error('Email failed:', err);
        alert(currentLanguage === 'ur' ? 'آرڈر جمع ہو گیا لیکن ای میل نہیں بھیجی جا سکی' : 
              currentLanguage === 'mm' ? 'အော်ဒါတင်ပြီးသော်လည်းအီးမေးလ်မပို့နိုင်' : 
              'Order placed but email failed');
      });
    });

    // Seller Account Creation with EmailJS Integration
    function createSellerAccount() {
      const name = document.getElementById('sellerName').value;
      const email = document.getElementById('sellerEmail').value;
      const phone = document.getElementById('sellerPhone').value;
      const address = document.getElementById('sellerAddress').value;
      const bank = document.getElementById('sellerBank').value;
      const id = document.getElementById('sellerID').value;
      
      if (!name || !email || !phone || !address || !bank || !id) {
        alert(currentLanguage === 'ur' ? 'براہ کرم تمام ضروری فیلڈز کو پُر کریں' : 
              currentLanguage === 'mm' ? 'ကျေးဇူးပြု၍လိုအပ်သောအကွက်များအားလုံးကိုဖြည့်ပါ' : 
              'Please fill all required fields');
        return;
      }
      
      const newSeller = {
        name,
        email,
        phone,
        address,
        bank,
        id,
        status: 'pending',
        date: new Date().toLocaleString()
      };
      
      pendingSellers.push(newSeller);
      localStorage.setItem('pendingSellers', JSON.stringify(pendingSellers));
      
      // Send email notification to admin (ashraf97941@gmail.com)
      emailjs.send('service_hwvi11g', 'template_kp1zovr', {
        to_email: 'ashraf97941@gmail.com',
        from_name: name,
        from_email: email,
        phone: phone,
        address: address,
        bank_details: bank,
        id_number: id,
        message: `New seller account request from ${name} at ${new Date().toLocaleString()}`
      }).then(() => {
        alert(currentLanguage === 'ur' ? 'سیلر اکاؤنٹ کی درخواست کامیابی سے جمع کرائی گئی! انتظامیہ کی منظوری کے لیے انتظار کریں۔' : 
              currentLanguage === 'mm' ? 'ရောင်းချသူအကောင့်တောင်းဆိုမှုအောင်မြင်စွာတင်ပြီးပါပြီ! အုပ်ချုပ်ရေးမှူးမှအတည်ပြုရန်စောင့်ပါ။' : 
              'Seller account request submitted successfully! Wait for admin approval.');
        
        // Reset form
        document.getElementById('sellerName').value = '';
        document.getElementById('sellerEmail').value = '';
        document.getElementById('sellerPhone').value = '';
        document.getElementById('sellerAddress').value = '';
        document.getElementById('sellerBank').value = '';
        document.getElementById('sellerID').value = '';
        
        // Go back to step 1
        document.getElementById('sellerStep2').classList.remove('active');
        document.getElementById('sellerStep1').classList.add('active');
        
        renderPendingSellers();
      }, (err) => {
        console.error('Email failed:', err);
        alert(currentLanguage === 'ur' ? 'درخواست جمع ہو گئی لیکن ای میل نہیں بھیجی جا سکی' : 
              currentLanguage === 'mm' ? 'တောင်းဆိုမှုတင်ပြီးသော်လည်းအီးမေးလ်မပို့နိုင်' : 
              'Request submitted but email failed');
      });
    }

    // Password Protection
    function showPasswordPrompt(action) {
      currentAction = action;
      document.getElementById('passwordPrompt').style.display = 'flex';
      document.getElementById('adminPasswordInput').value = '';
      document.getElementById('passwordError').style.display = 'none';
      document.getElementById('adminPasswordInput').focus();
    }

    function verifyPassword() {
      const enteredPassword = document.getElementById('adminPasswordInput').value;
      
      if (enteredPassword === ADMIN_PASSWORD) {
        isAdmin = true;
        localStorage.setItem('isAdmin', 'true');
        hidePasswordPrompt();
        
        if (currentAction === 'accessSettings') {
          document.getElementById('pageSettings').style.display = 'block';
          document.getElementById('pageHome').style.display = 'none';
        } else if (currentAction === 'addProduct') {
          addProduct();
        }
      } else {
        document.getElementById('passwordError').style.display = 'block';
        document.getElementById('adminPasswordInput').focus();
      }
    }

    // Helper functions
    function toggleCart() {
      renderCart();
      document.getElementById('cartPanel').style.display = 
        document.getElementById('cartPanel').style.display === 'block' ? 'none' : 'block';
    }

    function hideOrderForm() {
      document.getElementById('orderForm').style.display = 'none';
      document.getElementById('orderFormDetails').reset();
    }

    function hidePasswordPrompt() {
      document.getElementById('passwordPrompt').style.display = 'none';
      currentAction = '';
    }

    function updateStoreName() {
      document.getElementById('storeName').textContent = settings.storeName;
      document.title = `${settings.storeName} — ${currentLanguage === 'ur' ? 'ای کامرس' : currentLanguage === 'mm' ? 'အီးကုန်သွယ်ရေး' : 'Ecommerce'}`;
    }

    function saveCart() {
      localStorage.setItem('cart', JSON.stringify(cart));
    }

    // Seller Account Steps
    function nextSellerStep(currentStep, nextStep) {
      // Validate current step
      if (currentStep === 1) {
        const name = document.getElementById('sellerName').value;
        const email = document.getElementById('sellerEmail').value;
        const phone = document.getElementById('sellerPhone').value;
        
        if (!name || !email || !phone) {
          alert(currentLanguage === 'ur' ? 'براہ کرم تمام ضروری فیلڈز کو پُر کریں' : 
                currentLanguage === 'mm' ? 'ကျေးဇူးပြု၍လိုအပ်သောအကွက်များအားလုံးကိုဖြည့်ပါ' : 
                'Please fill all required fields');
          return;
        }
      }
      
      document.getElementById(`sellerStep${currentStep}`).classList.remove('active');
      document.getElementById(`sellerStep${nextStep}`).classList.add('active');
    }

    function prevSellerStep(currentStep, prevStep) {
      document.getElementById(`sellerStep${currentStep}`).classList.remove('active');
      document.getElementById(`sellerStep${prevStep}`).classList.add('active');
    }

    function renderPendingSellers() {
      const pendingSellersDiv = document.getElementById('pendingSellers');
      pendingSellersDiv.innerHTML = '';
      
      pendingSellers.forEach((seller, index) => {
        if (seller.status === 'pending') {
          const sellerCard = document.createElement('div');
          sellerCard.className = 'card';
          sellerCard.innerHTML = `
            <div class="title">${seller.name}</div>
            <div>Email: ${seller.email}</div>
            <div>Phone: ${seller.phone}</div>
            <div>Address: ${seller.address}</div>
            <div>Bank: ${seller.bank}</div>
            <div>ID: ${seller.id}</div>
            <div style="margin-top: 10px;">
              <button class="btn" onclick="approveSeller(${index})">Approve</button>
              <button class="btn danger" onclick="rejectSeller(${index})">Reject</button>
            </div>
          `;
          pendingSellersDiv.appendChild(sellerCard);
        }
      });
    }

    function approveSeller(index) {
      const seller = pendingSellers[index];
      seller.status = 'approved';
      approvedSellers.push(seller);
      pendingSellers.splice(index, 1);
      
      localStorage.setItem('pendingSellers', JSON.stringify(pendingSellers));
      localStorage.setItem('approvedSellers', JSON.stringify(approvedSellers));
      
      // Send approval email to seller
      emailjs.send('service_hwvi11g', 'template_kp1zovr', {
        to_email: seller.email,
        from_name: settings.storeName,
        message: `Your seller account has been approved! You can now start selling on ${settings.storeName}`
      }).then(() => {
        alert(currentLanguage === 'ur' ? 'سیلر اکاؤنٹ منظور کر لیا گیا اور ای میل بھیج دی گئی!' : 
              currentLanguage === 'mm' ? 'ရောင်းချသူအကောင့်အတည်ပြုပြီးအီးမေးလ်ပို့ပြီးပါပြီ!' : 
              'Seller account approved and email sent!');
      }, (err) => {
        console.error('Approval email failed:', err);
      });
      
      renderPendingSellers();
    }

    function rejectSeller(index) {
      const seller = pendingSellers[index];
      pendingSellers.splice(index, 1);
      localStorage.setItem('pendingSellers', JSON.stringify(pendingSellers));
      
      // Send rejection email to seller
      emailjs.send('service_hwvi11g', 'template_kp1zovr', {
        to_email: seller.email,
        from_name: settings.storeName,
        message: `Your seller account request has been rejected. Please contact support for more information.`
      }).then(() => {
        alert(currentLanguage === 'ur' ? 'سیلر اکاؤنٹ مسترد کر دیا گیا!' : 
              currentLanguage === 'mm' ? 'ရောင်းချသူအကောင့်တောင်းဆိုမှုကိုငြင်းပယ်လိုက်ပါပြီ!' : 
              'Seller account rejected!');
      }, (err) => {
        console.error('Rejection email failed:', err);
      });
      
      renderPendingSellers();
    }

    // Missing functions like saveStoreSettings, resetStoreSettings, saveAddress, resetAddress, clearCart, updateQuantity, removeFromCart, showOrderForm
    // Note: These were not defined in the original code either, but assuming they exist or need to be added similarly if required.
    // For completeness, adding stubs if needed, but since the issue was product addition, focusing on that.

    function saveStoreSettings() {
      // Implement if needed
    }

    function resetStoreSettings() {
      // Implement if needed
    }

    function saveAddress() {
      // Implement if needed
    }

    function resetAddress() {
      // Implement if needed
    }

    function clearCart() {
      cart = [];
      saveCart();
      renderCart();
    }

    function updateQuantity(index, newQuantity) {
      if (newQuantity >= 1) {
        cart[index].quantity = newQuantity;
        saveCart();
        renderCart();
      }
    }

    function removeFromCart(index) {
      cart.splice(index, 1);
      saveCart();
      renderCart();
    }

    function showOrderForm(productIndex = null) {
      if (productIndex !== null) {
        // For Buy Now: Clear cart and add single product
        cart = [{ productIndex, quantity: 1 }];
        renderCart();
      }
      document.getElementById('orderForm').style.display = 'flex';
    }
  </script>
</body>
</html>
