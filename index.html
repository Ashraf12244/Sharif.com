<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sharif.com â€” Ecommerce</title>
  <style>
    :root { --brand: #007bff; --brand-dark: #0056b3; --bg: #f5f6f8; --text: #222; --muted: #666; --card: #fff; --danger: #dc3545; }
    * { box-sizing: border-box; }
    body { margin: 0; background: var(--bg); color: var(--text); font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; }
    a { color: inherit; text-decoration: none; }

    header { background: var(--brand); color: #fff; padding: 12px 16px; position: sticky; top: 0; z-index: 10; }
    .nav { display: flex; align-items: center; gap: 12px; }
    .logo { font-weight: 800; font-size: 20px; }
    .search { flex: 1; display: flex; gap: 8px; max-width: 720px; margin: 0 12px; }
    .search input { flex: 1; padding: 10px; border: 0; border-radius: 8px; }
    .btn { background: #fff; color: var(--brand); border: 0; border-radius: 8px; padding: 10px 12px; font-weight: 700; cursor: pointer; }
    .btn.secondary { background: #eef3ff; color: var(--brand); }
    .btn.ghost { background: transparent; color: #fff; border: 1px solid rgba(255, 255, 255, .5); }
    .pill { padding: 6px 10px; border-radius: 999px; background: #fff; color: var(--brand); font-weight: 700; }

    .bar { display: flex; gap: 10px; align-items: center; }
    .wrap { padding: 16px; max-width: 1200px; margin: 0 auto; }
    .tabs { display: flex; gap: 10px; flex-wrap: wrap; }
    .tab { padding: 8px 12px; border-radius: 8px; background: #eaf1ff; color: #1a4fb8; cursor: pointer; }
    .tab.active { background: #1a4fb8; color: #fff; }

    .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; }
    @media (max-width: 1000px) { .grid { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 600px) { .grid { grid-template-columns: 1fr; } }
    .card { background: var(--card); border-radius: 12px; box-shadow: 0 2px 10px rgba(0, 0, 0, .08); padding: 12px; }
    .card img { width: 100%; height: 160px; object-fit: contain; background: #fff; border-radius: 8px; }
    .title { font-weight: 700; margin: 8px 0 4px; }
    .muted { color: var(--muted); font-size: 14px; }
    .price { font-size: 18px; font-weight: 800; margin-top: 4px; }
    .row { display: flex; align-items: center; justify-content: space-between; gap: 8px; }
    .badges { display: flex; gap: 6px; flex-wrap: wrap; margin-top: 6px; }
    .badge { font-size: 12px; background: #eef3ff; color: #1a4fb8; border-radius: 999px; padding: 4px 8px; font-weight: 700; }

    #cartPanel { position: fixed; right: 0; top: 0; width: 380px; max-width: 100%; height: 100%; background: #fff; box-shadow: -4px 0 16px rgba(0, 0, 0, .15); padding: 16px; display: none; flex-direction: column; z-index: 20; }
    .cart-line { display: flex; gap: 10px; margin: 10px 0; }
    .cart-line img { width: 64px; height: 64px; object-fit: contain; border: 1px solid #eee; border-radius: 8px; }
    .qty { display: flex; align-items: center; gap: 6px; margin-top: 6px; }
    .btn.icon { padding: 6px 10px; border: 1px solid var(--brand); background: #fff; color: var(--brand); }
    .btn.danger { background: var(--danger); color: #fff; }

    .page { display: none; }
    .page.active { display: block; }

    .setgrid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
    .setgrid input, .setgrid select, textarea { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ddd; background: #fff; }

    footer { padding: 20px; text-align: center; color: #777; }

    @media (max-width: 768px) {
      header { padding: 8px; }
      .nav { flex-direction: column; gap: 8px; }
      .search { margin: 0; width: 100%; }
      .bar { flex-direction: column; gap: 5px; }
      .grid { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); }
      .card img { height: 120px; }
      #cartPanel { width: 100%; }
      .wrap { padding: 8px; }
      .setgrid { grid-template-columns: 1fr; }
    }
  </style>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
  <script src="https://upload-widget.cloudinary.com/latest/global/all.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
</head>
<body>
  <header>
    <div class="nav">
      <div class="logo" id="brandLogo">Sharif.com</div>
      <div class="search">
        <input id="searchInput" type="search" placeholder="Search productsâ€¦" />
        <button class="btn" id="searchBtn">Search</button>
      </div>
      <div class="bar">
        <button class="btn ghost" id="langEn">EN</button>
        <button class="btn ghost" id="langUr">Ø§Ø±Ø¯Ùˆ</button>
        <button class="btn" id="openCart">Cart ðŸ›’ <span id="cartCount" class="pill">0</span></button>
        <a href="admin.html" class="btn ghost">Admin Panel</a>
        <a href="products.html" class="btn ghost">Products List</a>
      </div>
    </div>
  </header>
  <main class="wrap">
    <div class="tabs" id="catTabs"></div>
    <section id="pageHome" class="page active">
      <h2 id="homeTitle">Featured Products</h2>
      <div class="grid" id="productsGrid"></div>
    </section>
    <section id="pageOrders" class="page">
      <h2 id="ordersTitle">Recent Orders</h2>
      <div id="ordersList" class="grid"></div>
      <p class="muted">Orders are emailed via EmailJS.</p>
    </section>
    <section id="pageSettings" class="page">
      <h2>Store Settings</h2>
      <div class="setgrid">
        <div><label>Brand Name</label><input id="setBrand" value="Sharif.com" /></div>
        <div><label>Currency Symbol</label><input id="setCurr" value="â‚¹" /></div>
        <div><label>Default Language</label><select id="setLang"><option value="en" selected>English</option><option value="ur">Ø§Ø±Ø¯Ùˆ</option></select></div>
        <div><label>Enable Cash on Delivery</label><select id="setCOD"><option value="on" selected>On</option><option value="off">Off</option></select></div>
        <div style="grid-column:1/-1"><label>Store Notice</label><textarea id="setNotice" rows="3">Free delivery on orders over â‚¹999.</textarea></div>
      </div>
      <div style="margin-top:12px;display:flex;gap:10px">
        <button class="btn" id="saveSettings">Save Settings</button>
        <button class="btn secondary" id="resetSettings">Reset</button>
      </div>
    </section>
  </main>
  <div class="wrap"><p id="storeNotice" class="muted"></p></div>
  <aside id="cartPanel">
    <div class="row" style="margin-bottom:8px">
      <h3 id="cartTitle" style="margin:0">Your Cart</h3>
      <button class="btn icon" id="closeCart">âœ•</button>
    </div>
    <div id="cartItems"></div>
    <div class="row" style="margin-top:10px">
      <div class="price" id="cartTotal">â‚¹0</div>
      <button class="btn danger" id="clearCart">Clear</button>
    </div>
    <hr style="margin:14px 0">
    <h3 id="orderFormTitle" style="margin:6px 0 8px">Delivery Details</h3>
    <form id="orderForm">
      <input type="email" name="user_email" placeholder="Email" required />
      <input type="tel" name="user_phone" placeholder="Phone" required />
      <textarea name="user_address" placeholder="Full Address" required></textarea>
      <input type="hidden" name="order_details" id="order_details">
      <input type="hidden" name="order_total" id="order_total">
      <button class="btn" type="submit" style="width:100%;margin-top:8px">Place Order</button>
    </form>
    <p class="muted" style="margin-top:8px" id="codNote">Cash on Delivery available.</p>
  </aside>
  <footer>Â© <span id="brandFooter">Sharif.com</span> â€” Built for your business.</footer>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyD8pAE_mquNZTUujvEK-1v9xmDsUohdYcQ",
      authDomain: "sharifcom-45d95.firebaseapp.com",
      projectId: "sharifcom-45d95",
      storageBucket: "sharifcom-45d95.firebasestorage.app",
      messagingSenderId: "273914972899",
      appId: "1:273914972899:web:65e17d821111e4ac64d3d6",
      measurementId: "G-GZWZ52NDS1"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const EMAILJS_SERVICE = 'service_hwvi11g';
    const EMAILJS_TEMPLATE = 'template_kp1zovr';
    const EMAILJS_PUBLIC = 'DapdU3gPmJ8ymUdD2';
    emailjs.init(EMAILJS_PUBLIC);

    let cart = JSON.parse(localStorage.getItem('cart') || '[]');
    let orders = JSON.parse(localStorage.getItem('orders') || '[]');
    let settings = JSON.parse(localStorage.getItem('settings') || '{}');
    let currentLang = settings.lang || 'en';

    const brandLogo = document.getElementById('brandLogo');
    const brandFooter = document.getElementById('brandFooter');
    const catTabs = document.getElementById('catTabs');
    const productsGrid = document.getElementById('productsGrid');
    const searchInput = document.getElementById('searchInput');
    const cartPanel = document.getElementById('cartPanel');
    const cartItems = document.getElementById('cartItems');
    const cartCount = document.getElementById('cartCount');
    const cartTotal = document.getElementById('cartTotal');
    const ordersList = document.getElementById('ordersList');
    const storeNotice = document.getElementById('storeNotice');
    const codNote = document.getElementById('codNote');

    document.getElementById('langEn').onclick = () => switchLang('en');
    document.getElementById('langUr').onclick = () => switchLang('ur');
    document.getElementById('openCart').onclick = () => { cartPanel.style.display = 'flex'; renderCart(); };
    document.getElementById('closeCart').onclick = () => { cartPanel.style.display = 'none'; };
    document.getElementById('clearCart').onclick = clearCart;
    document.getElementById('searchBtn').onclick = renderProducts;
    searchInput.addEventListener('keydown', e => { if (e.key === 'Enter') renderProducts(); });
    document.getElementById('saveSettings').onclick = saveSettings;
    document.getElementById('resetSettings').onclick = () => { localStorage.removeItem('settings'); location.reload(); };

    const CATEGORIES = ['All', 'Audio', 'Accessories', 'Computers', 'Mobiles'];
    function initCategories() {
      catTabs.innerHTML = '';
      CATEGORIES.forEach(c => {
        const a = document.createElement('div');
        a.className = 'tab';
        a.textContent = c;
        a.onclick = () => { currentCat = c; renderProducts(); };
        catTabs.appendChild(a);
      });
    }

    function renderProducts() {
      const q = searchInput.value.trim().toLowerCase();
      const curr = settings.curr || 'â‚¹';
      productsGrid.innerHTML = '';
      // Placeholder for Firebase data
      const sampleProducts = [
        { title: 'Microphone X100', price: 2500, image: 'https://via.placeholder.com/300x200' },
        { title: 'Wireless Headphones', price: 3499, image: 'https://via.placeholder.com/300x200' }
      ];
      sampleProducts.forEach(p => {
        if (p.title.toLowerCase().includes(q)) {
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `<img src="${p.image}" alt="${p.title}"><div class="title">${p.title}</div><div class="price">${curr}${p.price}</div>`;
          productsGrid.appendChild(card);
        }
      });
      storeNotice.textContent = settings.notice || 'Free delivery on orders over â‚¹999.';
    }

    function renderCart() {
      const curr = settings.curr || 'â‚¹';
      cartItems.innerHTML = '';
      let total = 0;
      // Placeholder for cart items
      cart.forEach(ci => {
        total += ci.price * ci.qty;
        const line = document.createElement('div');
        line.className = 'cart-line';
        line.innerHTML = `<div>${ci.title} - ${curr}${ci.price} x ${ci.qty}</div>`;
        cartItems.appendChild(line);
      });
      cartTotal.textContent = curr + total;
      cartCount.textContent = cart.reduce((a, b) => a + b.qty, 0);
      document.getElementById('order_details').value = cart.map(ci => `${ci.title} x ${ci.qty}`).join('\n');
      document.getElementById('order_total').value = curr + total;
      codNote.style.display = settings.cod !== 'off' ? 'block' : 'none';
    }

    function renderOrders() {
      ordersList.innerHTML = '';
      if (!orders.length) {
        ordersList.innerHTML = '<div class="card"><div>No orders yet.</div></div>';
        return;
      }
      const curr = settings.curr || 'â‚¹';
      orders.forEach(o => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `<div class="title">Order</div><div class="price">${curr}${o.total}</div>`;
        ordersList.appendChild(card);
      });
    }

    function clearCart() { if (confirm('Clear cart?')) { cart = []; localStorage.setItem('cart', JSON.stringify(cart)); renderCart(); } }
    function saveSettings() {
      settings = { brand: document.getElementById('setBrand').value, curr: document.getElementById('setCurr').value, lang: document.getElementById('setLang').value, cod: document.getElementById('setCOD').value, notice: document.getElementById('setNotice').value };
      localStorage.setItem('settings', JSON.stringify(settings));
      applySettings();
      alert('Settings saved.');
    }
    function applySettings() {
      brandLogo.textContent = settings.brand || 'Sharif.com';
      brandFooter.textContent = settings.brand || 'Sharif.com';
      currentLang = settings.lang || 'en';
      renderProducts(); renderCart();
    }
    function switchLang(lang) {
      settings.lang = lang;
      localStorage.setItem('settings', JSON.stringify(settings));
      applySettings();
    }

    document.getElementById('orderForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      if (!cart.length) { alert('Your cart is empty.'); return; }
      try {
        await emailjs.sendForm(EMAILJS_SERVICE, EMAILJS_TEMPLATE, this);
        alert('Order placed! Check your email.');
        orders.push({ total: (document.getElementById('order_total').value || '').replace(/[^\d.]/g, '') || 0 });
        localStorage.setItem('orders', JSON.stringify(orders));
        this.reset();
        cart = []; localStorage.setItem('cart', JSON.stringify(cart)); renderCart();
      } catch (err) {
        console.error(err);
        alert('Failed to place order. Check EmailJS.');
      }
    });

    initCategories();
    applySettings();
    renderProducts();
    renderCart();
    renderOrders();
  </script>
</body>
</html>