<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sharif.com — E-commerce</title>
    <style>
        :root {
            --brand: #007bff;
            --bg: #f5f6f8;
            --text: #222;
            --card: #fff;
            --danger: #dc3545;
            --success: #28a745;
        }
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            margin: 0;
            background: var(--bg);
            color: var(--text);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body[dir="rtl"] {
            text-align: right;
        }
        body[dir="ltr"] {
            text-align: left;
        }
        /* Dark Mode */
        body.dark-mode {
            --bg: #222;
            --text: #f5f6f8;
            --card: #333;
        }
        body.dark-mode .card {
            background: var(--card);
            color: var(--text);
        }
        body.dark-mode header {
            background: #0056b3;
        }
        /* Header & Navigation */
        header {
            background: var(--brand);
            color: #fff;
            padding: 15px;
            position: sticky;
            top: 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .nav {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .logo {
            font-weight: bold;
            font-size: 22px;
        }
        .language-selector {
            display: flex;
            gap: 10px;
        }
        .lang-btn {
            background: transparent;
            color: white;
            border: 1px solid white;
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 12px;
        }
        .lang-btn.active {
            background: white;
            color: var(--brand);
        }
        .btn {
            background: #fff;
            color: var(--brand);
            border: 0;
            border-radius: 5px;
            padding: 8px 15px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        .btn:hover {
            opacity: 0.9;
        }
        .btn.ghost {
            background: transparent;
            color: #fff;
            border: 1px solid #fff;
        }
        .btn.danger {
            background: var(--danger);
            color: #fff;
        }
        .btn.success {
            background: var(--success);
            color: #fff;
        }
        .menu-btn {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
        }
        .three-line-menu {
            display: none;
            position: fixed;
            top: 70px;
            right: 20px;
            background: white;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            padding: 10px;
            min-width: 200px;
        }
        .three-line-menu.active {
            display: block;
        }
        .three-line-menu button {
            display: block;
            width: 100%;
            padding: 10px;
            text-align: left;
            border: none;
            background: none;
            cursor: pointer;
        }
        .three-line-menu button:hover {
            background: #f5f5f5;
        }
        /* Main Content */
        .wrap {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
        .setgrid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin: 20px 0;
        }
        .setgrid input,
        .setgrid textarea,
        .setgrid select {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
            font-family: inherit;
        }
        .setgrid textarea {
            min-height: 100px;
            resize: vertical;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
            .nav {
                flex-direction: row;
                align-items: center;
            }
        }
        .card {
            background: var(--card);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .card img {
            width: 100%;
            height: 200px;
            object-fit: contain;
            margin-bottom: 10px;
        }
        .title {
            font-weight: bold;
            margin: 10px 0;
            font-size: 18px;
        }
        .price {
            font-size: 18px;
            font-weight: bold;
            color: var(--brand);
            margin: 10px 0;
        }
        .description {
            color: #666;
            margin: 10px 0;
            font-size: 14px;
        }
        .product-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .product-actions button {
            flex: 1;
        }
        /* Cart & Order Panel */
        #cartPanel {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 350px;
            height: 100%;
            background: #fff;
            padding: 20px;
            box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
            z-index: 1000;
        }
        #orderForm {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        #orderFormContent {
            background: #fff;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            border-radius: 10px;
            position: relative;
        }
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--danger);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .hidden {
            display: none;
        }
        /* Settings & Admin */
        #settingsOptions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .seller-stage {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        .seller-stage:last-child {
            border-bottom: none;
        }
        .step {
            display: none;
        }
        .step.active {
            display: block;
        }
        .step-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        /* Password Prompt */
        #passwordPrompt {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 3000;
            align-items: center;
            justify-content: center;
        }
        #passwordPromptContent {
            background: #fff;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            text-align: center;
        }
        #passwordPromptContent input {
            width: 100%;
            padding: 10px;
            margin: 15px 0;
        }
        #passwordPromptContent .btn {
            width: 48%;
        }
        #passwordError {
            color: var(--danger);
            margin-top: 10px;
            display: none;
        }
        /* Reviews & Wishlist */
        .review-section {
            margin-top: 20px;
            border-top: 1px solid #ddd;
            padding-top: 10px;
        }
        .review {
            margin-bottom: 10px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        .review-form input,
        .review-form textarea,
        .review-form select {
            width: 100%;
            margin-bottom: 10px;
        }
        .wish-list {
            margin-top: 20px;
        }
        .recommendation-section {
            margin-top: 20px;
            background: #f9f9f9;
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo" id="storeName" data-en="Sharif.com" data-ur="شریف ڈاٹ کام" data-mm="ရှရစ်ဒတ်ကွမ်">Sharif.com</div>
        <div class="nav">
            <button class="menu-btn" onclick="toggleMenu()">☰</button>
            <button class="btn ghost" onclick="toggleCart()" id="cartBtn" data-en="View Cart" data-ur="کارٹ دیکھیں" data-mm="စျေးခြင်းတောင်းကြည့်ရန်">View Cart</button>
            <button class="btn ghost" onclick="showLoginForm()" id="loginBtn" data-en="Login" data-ur="لاگ ان" data-mm="ဝင်ရောက်ပါ">Login</button>
            <div class="language-selector">
                <button class="lang-btn active" data-lang="en">EN</button>
                <button class="lang-btn" data-lang="ur">اردو</button>
                <button class="lang-btn" data-lang="mm">မြန်မာ</button>
            </div>
        </div>
        <div class="three-line-menu" id="threeLineMenu">
            <button onclick="showPage('home')" id="menuHome" data-en="Home" data-ur="ہوم" data-mm="ပင်မစာမျက်နှာ">Home</button>
            <button onclick="showPage('settings')" id="menuSettings" data-en="Settings" data-ur="ترتیبات" data-mm="ဆက်တင်များ">Settings</button>
        </div>
    </header>
    <main class="wrap">
        <section id="pageHome" class="page active">
            <h2 id="productsTitle" data-en="Our Products" data-ur="ہماری مصنوعات" data-mm="ကျွန်ုပ်တို့၏ထုတ်ကုန်များ">Our Products</h2>
            <div class="setgrid">
                <input type="text" id="searchInput" placeholder="Search products..." data-en="Search products..." data-ur="مصنوعات تلاش کریں..." data-mm="ထုတ်ကုန်များရှာဖွေပါ...">
                <select id="filterSelect">
                    <option value="all" data-en="All" data-ur="تمام" data-mm="အားလုံး">All</option>
                    <option value="priceLow" data-en="Price: Low to High" data-ur="قیمت: کم سے زیادہ" data-mm="စျေးနှုန်း: နိမ့်မှမြင့်သို့">Price: Low to High</option>
                    <option value="priceHigh" data-en="Price: High to Low" data-ur="قیمت: زیادہ سے کم" data-mm="စျေးနှုန်း: မြင့်မှနိမ့်သို့">Price: High to Low</option>
                </select>
            </div>
            <div class="grid" id="productsGrid"></div>
            <div class="wish-list" id="wishList"></div>
        </section>

        <section id="pageSettings" class="page">
            <div id="settingsOptions">
                <button class="btn" onclick="toggleSection('storeSettingsSection')" data-en="Store Settings" data-ur="اسٹور ترتیبات" data-mm="ဆိုင်ဆက်တင်များ">Store Settings</button>
                <button class="btn" onclick="toggleSection('userProfileSection')" data-en="Your Profile" data-ur="آپ کا پروفائل" data-mm="သင့်ပရိုဖိုင်">Your Profile</button>
                <button class="btn" onclick="toggleSection('adminPanelSection')" id="adminPanelBtn" style="display: none;" data-en="Admin Control Panel" data-ur="ایڈمن کنٹرول پینل" data-mm="အက်ဒမင်ထိန်းချုပ်ရေးဘုတ်အဖွဲ့">Admin Control Panel</button>
                <button class="btn" onclick="toggleSection('createSellerSection')" data-en="Create Seller Account" data-ur="سیلر اکاؤنٹ بنائیں" data-mm="ရောင်းချသူအကောင့်ဖန်တီးပါ">Create Seller Account</button>
                <button class="btn" onclick="toggleSection('addressBookSection')" data-en="Book Your Address" data-ur="اپنا پتہ بک کریں" data-mm="သင့်လိပ်စာကိုမှတ်ပါ">Book Your Address</button>
            </div>

            <div id="storeSettingsSection" style="display: none;">
                <h2 data-en="Store Settings" data-ur="اسٹور ترتیبات" data-mm="ဆိုင်ဆက်တင်များ">Store Settings</h2>
                <div class="setgrid">
                    <input type="text" placeholder="Store Name" id="setStoreName" data-en="Store Name" data-ur="اسٹور کا نام" data-mm="ဆိုင်နာမည်">
                    <input type="text" placeholder="Currency" id="setCurrency" data-en="Currency" data-ur="کرنسی" data-mm="ငွေကြေးယူနစ်">
                    <textarea placeholder="Store Notice" id="setNotice" data-en="Store Notice" data-ur="اسٹور نوٹس" data-mm="ဆိုင်အသိပေးချက်"></textarea>
                </div>
                <button class="btn" onclick="saveStoreSettings()" data-en="Save Settings" data-ur="ترتیبات محفوظ کریں" data-mm="ဆက်တင်များသိမ်းဆည်းပါ">Save Settings</button>
                <button class="btn danger" onclick="resetStoreSettings()" data-en="Reset" data-ur="ری سیٹ" data-mm="ပြန်လည်သတ်မှတ်ပါ">Reset</button>
            </div>

            <div id="userProfileSection" style="display: none;">
                <h2 data-en="Your Profile" data-ur="آپ کا پروفائل" data-mm="သင့်ပရိုဖိုင်">Your Profile</h2>
                <div class="setgrid" id="profileForm">
                    <input type="text" placeholder="Name" id="profileNameInput" data-en="Name" data-ur="نام" data-mm="နာမည်">
                    <input type="email" placeholder="Email" id="profileEmailInput" data-en="Email" data-ur="ای میل" data-mm="အီးမေးလ်">
                    <input type="tel" placeholder="Phone" id="profilePhoneInput" data-en="Phone" data-ur="فون" data-mm="ဖုန်း">
                    <textarea placeholder="Full Address" id="profileAddressInput" data-en="Full Address" data-ur="مکمل پتہ" data-mm="လိပ်စာအပြည့်အစုံ"></textarea>
                    <input type="password" placeholder="Password" id="profilePasswordInput" data-en="Password" data-ur="پاس ورڈ" data-mm="စကားဝှက်">
                </div>
                <button class="btn success" onclick="saveProfile()" data-en="Save Profile" data-ur="پروفائل محفوظ کریں" data-mm="ပရိုဖိုင်သိမ်းဆည်းပါ">Save Profile</button>
                <div id="profileDisplay" style="display: none;">
                    <p id="profileId"></p>
                    <p id="profileName"></p>
                    <p id="profileEmail"></p>
                    <p id="profilePhone"></p>
                    <p id="profileAddress"></p>
                </div>
            </div>

            <div id="adminPanelSection" style="display: none;">
                <h2 data-en="Admin Control Panel" data-ur="ایڈمن کنٹرول پینل" data-mm="အက်ဒမင်ထိန်းချုပ်ရေးဘုတ်အဖွဲ့">Admin Control Panel</h2>
                <div id="productManagement" style="display: none;">
                    <h3 data-en="Product Management" data-ur="پروڈکٹ مینجمنٹ" data-mm="ထုတ်ကုန်စီမံခန့်ခွဲမှု">Product Management</h3>
                    <div class="setgrid">
                        <input type="text" placeholder="Product Title" id="adminTitle" data-en="Product Title" data-ur="پروڈکٹ کا عنوان" data-mm="ထုတ်ကုန်ခေါင်းစဉ်">
                        <input type="text" placeholder="Brand" id="adminBrand" data-en="Brand" data-ur="برانڈ" data-mm="အမှတ်တံဆိပ်">
                        <textarea placeholder="Description" id="adminDescription" data-en="Description" data-ur="تفصیل" data-mm="ဖော်ပြချက်"></textarea>
                        <input type="number" placeholder="Price" id="adminPrice" data-en="Price" data-ur="قیمت" data-mm="စျေးနှုန်း">
                        <input type="file" id="imageFileInput" accept="image/*">
                        <input type="text" placeholder="Image URL (alternative)" id="imageUrlInput" data-en="Image URL (alternative)" data-ur="امیج یو آر ایل (متبادل)" data-mm="ပုံ URL (အခြားရွေးချယ်စရာ)">
                        <img id="imagePreview" src="" alt="Preview" style="max-width: 200px; display: none; margin-top: 10px;">
                    </div>
                    <button class="btn" id="adminAddProductBtn" onclick="showPasswordPrompt('addProduct')" data-en="Add Product" data-ur="پروڈکٹ شامل کریں" data-mm="ထုတ်ကုန်ထည့်ပါ">Add Product</button>
                </div>
                <h3 data-en="Current Products" data-ur="موجودہ مصنوعات" data-mm="လက်ရှိထုတ်ကုန်များ">Current Products</h3>
                <div class="grid" id="adminProductList"></div>

                <h3 data-en="Pending Seller Accounts" data-ur="زیر التواء سیلر اکاؤنٹس" data-mm="ဆိုင်းငံ့ထားသော ရောင်းချသူအကောင့်များ">Pending Seller Accounts</h3>
                <div class="grid" id="pendingSellers"></div>
            </div>

            <div id="createSellerSection" style="display: none;">
                <h2 data-en="Create Seller Account" data-ur="سیلر اکاؤنٹ بنائیں" data-mm="ရောင်းချသူအကောင့်ဖန်တီးပါ">Create Seller Account</h2>
                <div class="seller-stage">
                    <h3 data-en="Step 1: Basic Information" data-ur="مرحلہ 1: بنیادی معلومات" data-mm="အဆင့် 1: အခြေခံအချက်အလက်များ">Step 1: Basic Information</h3>
                    <div class="setgrid step active" id="sellerStep1">
                        <input type="text" placeholder="Full Name" id="sellerName" data-en="Full Name" data-ur="مکمل نام" data-mm="နာမည်အပြည့်အစုံ">
                        <input type="email" placeholder="Email" id="sellerEmail" data-en="Email" data-ur="ای میل" data-mm="အီးမေးလ်">
                        <input type="tel" placeholder="Phone" id="sellerPhone" data-en="Phone" data-ur="فون" data-mm="ဖုန်း">
                        <div class="step-nav">
                            <button class="btn" onclick="nextSellerStep(1, 2)" data-en="Next Step" data-ur="اگلا مرحلہ" data-mm="နောက်အဆင့်">Next Step</button>
                        </div>
                    </div>
                </div>
                <div class="seller-stage">
                    <h3 data-en="Step 2: Additional Information" data-ur="مرحلہ 2: اضافی معلومات" data-mm="အဆင့် 2: ထပ်ဆောင်းအချက်အလက်များ">Step 2: Additional Information</h3>
                    <div class="setgrid step" id="sellerStep2">
                        <textarea placeholder="Full Address" id="sellerAddress" data-en="Full Address" data-ur="مکمل پتہ" data-mm="လိပ်စာအပြည့်အစုံ"></textarea>
                        <input type="text" placeholder="Bank Account Details" id="sellerBank" data-en="Bank Account Details" data-ur="بینک اکاؤنٹ کی تفصیلات" data-mm="ဘဏ်အကောင့်အသေးစိတ်">
                        <input type="text" placeholder="National ID Number" id="sellerID" data-en="National ID Number" data-ur="قومی شناختی نمبر" data-mm="အမျိုးသားမှတ်ပုံတင်နံပါတ်">
                        <div class="step-nav">
                            <button class="btn ghost" onclick="prevSellerStep(2, 1)" data-en="Previous Step" data-ur="پچھلا مرحلہ" data-mm="ယခင်အဆင့်">Previous Step</button>
                            <button class="btn success" id="createSellerBtn" onclick="createSellerAccount()" data-en="Create Account" data-ur="اکاؤنٹ بنائیں" data-mm="အကောင့်ဖန်တီးပါ">Create Account</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="addressBookSection" style="display: none;">
                <h2 data-en="Address Book" data-ur="ایڈریس بک" data-mm="လိပ်စာစာအုပ်">Address Book</h2>
                <div class="setgrid">
                    <input type="text" placeholder="Name" id="custName" data-en="Name" data-ur="نام" data-mm="နာမည်">
                    <input type="email" placeholder="Email" id="custEmail" data-en="Email" data-ur="ای میل" data-mm="အီးမေးလ်">
                    <input type="tel" placeholder="Phone" id="custPhone" data-en="Phone" data-ur="فون" data-mm="ဖုန်း">
                    <textarea placeholder="Full Address" id="custAddress" data-en="Full Address" data-ur="مکمل پتہ" data-mm="လိပ်စာအပြည့်အစုံ"></textarea>
                </div>
                <button class="btn" onclick="saveAddress()" data-en="Save Address" data-ur="پتہ محفوظ کریں" data-mm="လိပ်စာသိမ်းဆည်းပါ">Save Address</button>
                <button class="btn danger" onclick="resetAddress()" data-en="Reset" data-ur="ری سیٹ" data-mm="ပြန်လည်သတ်မှတ်ပါ">Reset</button>
            </div>
        </section>
    </main>

    <div id="cartPanel">
        <h3 id="cartTitle" data-en="Your Cart" data-ur="آپ کی کارٹ" data-mm="သင့်စျေးခြင်းတောင်း">Your Cart</h3>
        <div id="cartItems"></div>
        <div id="cartTotal" style="font-weight: bold; margin: 15px 0;"></div>
        <button class="btn danger" onclick="clearCart()" id="clearCartBtn" data-en="Clear Cart" data-ur="کارٹ صاف کریں" data-mm="စျေးခြင်းတောင်းရှင်းလင်းပါ">Clear Cart</button>
        <button class="btn success" onclick="showOrderForm()" id="orderNowBtn" data-en="Order Now" data-ur="ابھی آرڈر کریں" data-mm="ယခုမှာယူပါ">Order Now</button>
    </div>

    <div id="orderForm">
        <div id="orderFormContent">
            <button class="close-btn" onclick="hideOrderForm()">×</button>
            <h3 id="orderTitle" data-en="Order Details" data-ur="آرڈر کی تفصیلات" data-mm="အော်ဒါအသေးစိတ်">Order Details</h3>
            <form id="orderFormDetails">
                <div class="form-group">
                    <label for="orderName" id="nameLabel" data-en="Name" data-ur="نام" data-mm="နာမည်">Name</label>
                    <input type="text" id="orderName" name="name" required>
                </div>
                <div class="form-group">
                    <label for="orderEmail" id="emailLabel" data-en="Email" data-ur="ای میل" data-mm="အီးမေးလ်">Email</label>
                    <input type="email" id="orderEmail" name="email" required>
                </div>
                <div class="form-group">
                    <label for="orderPhone" id="phoneLabel" data-en="Phone" data-ur="فون" data-mm="ဖုန်း">Phone</label>
                    <input type="tel" id="orderPhone" name="phone" required>
                </div>
                <div class="form-group">
                    <label for="orderAddress" id="addressLabel" data-en="Address" data-ur="پتہ" data-mm="လိပ်စာ">Address</label>
                    <textarea id="orderAddress" name="address" required></textarea>
                </div>
                <div class="form-group">
                    <label id="orderSummaryLabel" data-en="Order Summary" data-ur="آرڈر کا خلاصہ" data-mm="အော်ဒါအကျဉ်းချုပ်">Order Summary</label>
                    <div id="orderSummary" style="padding: 10px; background: #f5f5f5; border-radius: 5px;"></div>
                </div>
                <input type="hidden" name="order_details" id="orderDetails">
                <input type="hidden" name="order_total" id="orderTotal">
                <button type="submit" class="btn success" style="width: 100%; margin-top: 15px;" id="submitOrderBtn" data-en="Place Order" data-ur="آرڈر دیں" data-mm="အော်ဒါတင်ပါ">Place Order</button>
            </form>
        </div>
    </div>

    <div id="passwordPrompt">
        <div id="passwordPromptContent">
            <h3 id="passwordPromptTitle" data-en="Admin Password Required" data-ur="ایڈمن پاس ورڈ درکار ہے" data-mm="အက်ဒမင်စကားဝှက်လိုအပ်သည်">Admin Password Required</h3>
            <input type="password" id="adminPasswordInput" placeholder="Enter password" data-en="Enter password" data-ur="پاس ورڈ درج کریں" data-mm="စကားဝှက်ထည့်ပါ">
            <button class="btn" onclick="verifyPassword()" id="verifyPasswordBtn" data-en="Verify" data-ur="تصدیق کریں" data-mm="အတည်ပြုပါ">Verify</button>
            <button class="btn danger" onclick="hidePasswordPrompt()" id="cancelPasswordBtn" data-en="Cancel" data-ur="منسوخ کریں" data-mm="ပယ်ဖျက်ပါ">Cancel</button>
            <p id="passwordError" class="danger" data-en="Wrong password!" data-ur="غلط پاس ورڈ!" data-mm="စကားဝှက်မမှန်ကန်ပါ!">Wrong password!</p>
        </div>
    </div>

    <div id="loginForm" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center;">
        <div style="background: #fff; padding: 30px; max-width: 400px; border-radius: 10px;">
            <button class="close-btn" onclick="hideLoginForm()">×</button>
            <h3 data-en="Login" data-ur="لاگ ان" data-mm="ဝင်ရောက်ပါ">Login</h3>
            <input type="email" id="loginEmail" placeholder="Email" required>
            <input type="password" id="loginPassword" placeholder="Password" required>
            <button class="btn" onclick="loginUser()">Login</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script>
        // Initialize EmailJS with your credentials
        (function() {
            emailjs.init("DapdU3gPmJ8ymUdD2");
        })();

        // === Global Variables ===
        const ADMIN_PASSWORD = '@122@44@good';
        const ADMIN_EMAIL = 'ashraf97941@gmail.com';
        const PRODUCTS_API = 'https://api.airtable.com/v0/app3bPSMkXnHaooyU/Products';
        const ORDERS_API = 'https://api.airtable.com/v0/app3bPSMkXnHaooyU/Orders';
        const CUSTOMERS_API = 'https://api.airtable.com/v0/app3bPSMkXnHaooyU/Customers';
        const SELLERS_API = 'https://api.airtable.com/v0/app3bPSMkXnHaooyU/Sellers';
        const API_KEY = 'patospSjmDLHmHPCk.13a17b94f962ff76abbd9ce0165fce6dbe2fa8fea723ebd6cbfb2dad98bfa83d';

        let isAdmin = localStorage.getItem('isAdmin') === 'true';
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let currentLanguage = localStorage.getItem('language') || 'en';
        let products = [];
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let settings = JSON.parse(localStorage.getItem('settings')) || { storeName: 'Sharif.com', currency: '₹', notice: '' };
        let addresses = JSON.parse(localStorage.getItem('addresses')) || [];
        let pendingSellers = JSON.parse(localStorage.getItem('pendingSellers')) || [];
        let approvedSellers = JSON.parse(localStorage.getItem('approvedSellers')) || [];
        let customers = JSON.parse(localStorage.getItem('customers')) || [];
        let wishList = JSON.parse(localStorage.getItem('wishList')) || [];
        let currentAction = '';

        // === Initialization ===
        document.addEventListener('DOMContentLoaded', async () => {
            updateStoreName();
            setupLanguageButtons();
            setupImagePreview();
            await loadProductsFromAPI();
            renderProducts();
            renderAdminProducts();
            renderPendingSellers();
            renderCart();
            renderWishList();
            setupSearchAndFilter();
            updateUserInterface();
            updateLanguage();
        });

        // === API Functions ===
        async function loadProductsFromAPI() {
            try {
                const response = await fetch(PRODUCTS_API, {
                    headers: { Authorization: `Bearer ${API_KEY}` }
                });
                const data = await response.json();
                products = data.records.map(item => ({
                    id: item.id,
                    title: item.fields.Name || '',
                    description: item.fields.Description || '',
                    price: parseFloat(item.fields.Price) || 0,
                    image: item.fields.Image ? item.fields.Image[0].url : '',
                    brand: item.fields.Brand || '',
                    seller: item.fields.Seller || 'admin',
                    reviews: item.fields.Reviews ? JSON.parse(item.fields.Reviews) : []
                }));
            } catch (error) {
                console.error('Error loading products:', error);
            }
        }

        async function saveProductToAPI(product) {
            try {
                const response = await fetch(PRODUCTS_API, {
                    method: 'POST',
                    headers: {
                        Authorization: `Bearer ${API_KEY}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        fields: {
                            Name: product.title,
                            Description: product.description,
                            Price: product.price,
                            Brand: product.brand,
                            Seller: product.seller,
                            Reviews: JSON.stringify(product.reviews),
                            Image: product.image ? [{ url: product.image }] : []
                        }
                    })
                });
                await loadProductsFromAPI();
                return await response.json();
            } catch (error) {
                console.error('Error saving product:', error);
                return null;
            }
        }

        async function saveOrderToAPI(orderData) {
            try {
                const response = await fetch(ORDERS_API, {
                    method: 'POST',
                    headers: {
                        Authorization: `Bearer ${API_KEY}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        fields: {
                            Name: orderData.name,
                            Email: orderData.email,
                            Phone: orderData.phone,
                            Address: orderData.address,
                            OrderDetails: orderData.order_details,
                            OrderTotal: orderData.order_total,
                            Status: 'pending',
                            Date: new Date().toLocaleString()
                        }
                    })
                });
                return await response.json();
            } catch (error) {
                console.error('Error saving order:', error);
                return null;
            }
        }

        async function saveCustomerToAPI(customerData) {
            try {
                const response = await fetch(CUSTOMERS_API, {
                    method: 'POST',
                    headers: {
                        Authorization: `Bearer ${API_KEY}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        fields: {
                            Name: customerData.name,
                            Email: customerData.email,
                            Phone: customerData.phone,
                            Address: customerData.address,
                            Password: customerData.password,
                            Verified: true,
                            Date: new Date().toLocaleString()
                        }
                    })
                });
                return await response.json();
            } catch (error) {
                console.error('Error saving customer:', error);
                return null;
            }
        }

        async function saveSellerToAPI(sellerData) {
            try {
                const response = await fetch(SELLERS_API, {
                    method: 'POST',
                    headers: {
                        Authorization: `Bearer ${API_KEY}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        fields: {
                            Name: sellerData.name,
                            Email: sellerData.email,
                            Phone: sellerData.phone,
                            Address: sellerData.address,
                            Bank: sellerData.bank,
                            ID: sellerData.id,
                            Status: sellerData.status,
                            Date: new Date().toLocaleString()
                        }
                    })
                });
                return await response.json();
            } catch (error) {
                console.error('Error saving seller:', error);
                return null;
            }
        }

        // === Language Handling ===
        function setupLanguageButtons() {
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentLanguage = btn.dataset.lang;
                    localStorage.setItem('language', currentLanguage);
                    document.body.dir = currentLanguage === 'ur' ? 'rtl' : 'ltr';
                    updateLanguage();
                });
            });
            document.querySelector(`.lang-btn[data-lang="${currentLanguage}"]`)?.classList.add('active');
        }

        function getTranslatedMessage(key) {
            const translations = {
                'Ecommerce': { en: 'Ecommerce', ur: 'ای کامرس', mm: 'အီးကုန်သွယ်ရေး' },
                'Our Products': { en: 'Our Products', ur: 'ہماری مصنوعات', mm: 'ကျွန်ုပ်တို့၏ထုတ်ကုန်များ' },
                'No products available.': { en: 'No products available.', ur: 'کوئی پروڈکٹس دستیاب نہیں ہیں۔', mm: 'ထုတ်ကုန်များမရရှိနိုင်ပါ။' },
                'Settings saved successfully!': { en: 'Settings saved successfully!', ur: 'ترتیبات کامیابی سے محفوظ ہو گئیں!', mm: 'ဆက်တင်များ အောင်မြင်စွာ သိမ်းဆည်းပြီးပါပြီ။' },
                'Are you sure you want to reset settings?': { en: 'Are you sure you want to reset settings?', ur: 'کیا آپ واقعی ترتیبات کو ری سیٹ کرنا چاہتے ہیں؟', mm: 'ဆက်တင်များကို ပြန်လည်သတ်မှတ်ရန် သေချာပါသလား။' },
                'Settings reset!': { en: 'Settings reset!', ur: 'ترتیبات ری سیٹ ہو گئیں!', mm: 'ဆက်တင်များ ပြန်လည်သတ်မှတ်ပြီးပါပြီ။' },
                'Please fill all required fields and enter a valid price or image': { en: 'Please fill all required fields and enter a valid price or image', ur: 'براہ کرم تمام مطلوبہ فیلڈز پُر کریں اور درست قیمت یا تصویر درج کریں۔', mm: 'ကျေးဇူးပြု၍ လိုအပ်သောအကွက်များအားလုံးဖြည့်ပြီး မှန်ကန်သောစျေးနှုန်း သို့မဟုတ် ပုံထည့်ပါ။' },
                'Product added successfully!': { en: 'Product added successfully!', ur: 'پروڈکٹ کامیابی سے شامل ہو گئی!', mm: 'ထုတ်ကုန်ကို အောင်မြင်စွာ ထည့်သွင်းပြီးပါပြီ။' },
                'Are you sure you want to delete this product?': { en: 'Are you sure you want to delete this product?', ur: 'کیا آپ واقعی اس پروڈکٹ کو ڈیلیٹ کرنا چاہتے ہیں؟', mm: 'ဤထုတ်ကုန်ကို ဖျက်ရန် သေချာပါသလား။' },
                'Product deleted successfully!': { en: 'Product deleted successfully!', ur: 'پروڈکٹ کامیابی سے ڈیلیٹ ہو گئی!', mm: 'ထုတ်ကုန်ကို အောင်မြင်စွာ ဖျက်လိုက်ပါပြီ။' },
                'Product added to cart!': { en: 'Product added to cart!', ur: 'پروڈکٹ کارٹ میں شامل ہو گئی!', mm: 'ထုတ်ကုန်ကို စျေးခြင်းတောင်းထဲသို့ ထည့်လိုက်ပြီ။' },
                'Are you sure you want to clear the cart?': { en: 'Are you sure you want to clear the cart?', ur: 'کیا آپ واقعی کارٹ کو خالی کرنا چاہتے ہیں؟', mm: 'စျေးခြင်းတောင်းကို ဖျက်ရန် သေချာပါသလား။' },
                'Order placed successfully! We will contact you soon.': { en: 'Order placed successfully! We will contact you soon.', ur: 'آرڈر کامیابی سے جمع کرایا گیا! ہم جلد ہی آپ سے رابطہ کریں گے۔', mm: 'အော်ဒါအောင်မြင်စွာ တင်ပြီးပါပြီ! မကြာမီသင့်ကို ဆက်သွယ်ပါမည်။' },
                'Order placed but email failed': { en: 'Order placed but email failed', ur: 'آرڈر جمع ہو گیا لیکن ای میل نہیں بھیجی جا سکی', mm: 'အော်ဒါတင်ပြီးသော်လည်း အီးမေးလ်မပို့နိုင်' },
                'Seller account request submitted! Wait for admin approval.': { en: 'Seller account request submitted! Wait for admin approval.', ur: 'سیلر اکاؤنٹ کی درخواست کامیابی سے جمع کرائی گئی! انتظامیہ کی منظوری کے لیے انتظار کریں۔', mm: 'ရောင်းချသူအကောင့်တောင်းဆိုမှု အောင်မြင်စွာ တင်ပြီးပါပြီ! အုပ်ချုပ်ရေးမှူးမှ အတည်ပြုရန် စောင့်ပါ။' },
                'Seller account approved and email sent!': { en: 'Seller account approved and email sent!', ur: 'سیلر اکاؤنٹ منظور کر لیا گیا اور ای میل بھیج دی گئی!', mm: 'ရောင်းချသူအကောင့် အတည်ပြုပြီး အီးမေးလ်ပို့ပြီးပါပြီ!' },
                'Seller account rejected and email sent!': { en: 'Seller account rejected and email sent!', ur: 'سیلر اکاؤنٹ مسترد کر دیا گیا اور ای میل بھیج دی گئی!', mm: 'ရောင်းချသူအကောင့် ငြင်းပယ်ပြီး အီးမေးလ်ပို့ပြီးပါပြီ!' },
                'Email already registered!': { en: 'Email already registered!', ur: 'یہ ای میل پہلے سے رجسٹرڈ ہے!', mm: 'ဤအီးမေးလ်သည် မှတ်ပုံတင်ပြီးဖြစ်သည်!' },
                'Account created successfully! Email sent.': { en: 'Account created successfully! Email sent.', ur: 'اکاؤنٹ کامیابی سے بن گیا! ای میل بھیج دی گئی۔', mm: 'အကောင့်အောင်မြင်စွာ ဖန်တီးပြီးပါပြီ! အီးမေးလ်ပို့ပြီးပါပြီ။' },
                'Invalid email format': { en: 'Invalid email format', ur: 'غلط ای میل فارمیٹ', mm: 'မမှန်ကန်သော အီးမေးလ်ပုံစံ' },
                'Invalid phone number': { en: 'Invalid phone number', ur: 'غلط فون نمبر', mm: 'မမှန်ကန်သော ဖုန်းနံပါတ်' },
                'Product added to wishlist!': { en: 'Product added to wishlist!', ur: 'پروڈکٹ وش لسٹ میں شامل ہو گئی!', mm: 'ထုတ်ကုန်ကို ဆန္ဒစာရင်းသို့ ထည့်လိုက်ပြီ!' },
                'Product already in wishlist!': { en: 'Product already in wishlist!', ur: 'پروڈکٹ پہلے سے وش لسٹ میں ہے!', mm: 'ထုတ်ကုန်သည် ဆန္ဒစာရင်းတွင် ရှိပြီးဖြစ်သည်!' },
                'Review submitted successfully!': { en: 'Review submitted successfully!', ur: 'جائزہ کامیابی سے جمع ہو گیا!', mm: 'သုံးသပ်ချက်ကို အောင်မြင်စွာ ပို့ပြီးပါပြီ။' },
                'Please fill all review fields': { en: 'Please fill all review fields', ur: 'براہ کرم جائزے کے تمام فیلڈز پُر کریں۔', mm: 'ကျေးဇူးပြု၍ သုံးသပ်ချက်အကွက်များအားလုံးဖြည့်ပါ။' },
                'Address saved successfully!': { en: 'Address saved successfully!', ur: 'پتہ کامیابی سے محفوظ ہو گیا!', mm: 'လိပ်စာကို အောင်မြင်စွာ သိမ်းဆည်းပြီးပါပြီ။' },
                'Please fill all required fields': { en: 'Please fill all required fields', ur: 'براہ کرم تمام مطلوبہ فیلڈز پُر کریں۔', mm: 'ကျေးဇူးပြု၍ လိုအပ်သောအကွက်များအားလုံးဖြည့်ပါ။' },
                'Order placed but email failed': { en: 'Order placed but email failed', ur: 'آرڈر جمع ہو گیا لیکن ای میل نہیں بھیجی جا سکی', mm: 'အော်ဒါတင်ပြီးသော်လည်း အီးမေးလ်မပို့နိုင်' },
                'Request submitted but email failed': { en: 'Request submitted but email failed', ur: 'درخواست جمع ہو گئی لیکن ای میل نہیں بھیجی جا سکی', mm: 'တောင်းဆိုမှု တင်ပြီးသော်လည်း အီးမေးလ်မပို့နိုင်' },
                'Account created but email failed': { en: 'Account created but email failed', ur: 'اکاؤنٹ بن گیا لیکن ای میل نہیں بھیجی جا سکی', mm: 'အကောင့်ဖန်တီးပြီးသော်လည်း အီးမေးလ်မပို့နိုင်' },
                'Recommended for You': { en: 'Recommended for You', ur: 'آپ کے لیے تجویز کردہ', mm: 'သင့်အတွက် အကြံပြုထားသော' },
                'Your Name': { en: 'Your Name', ur: 'آپ کا نام', mm: 'သင့်နာမည်' },
                'Your Review': { en: 'Your Review', ur: 'آپ کا جائزہ', mm: 'သင့်သုံးသပ်ချက်' },
                'Rating': { en: 'Rating', ur: 'ریٹنگ', mm: 'အဆင့်သတ်မှတ်ချက်' },
                'Submit Review': { en: 'Submit Review', ur: 'جائزہ جمع کریں', mm: 'သုံးသပ်ချက်တင်သွင်းရန်' },
                'Wishlist': { en: 'Wishlist', ur: 'وش لسٹ', mm: 'ဆန္ဒစာရင်း' },
                'Add to Wishlist': { en: 'Add to Wishlist', ur: 'وش لسٹ میں شامل کریں', mm: 'ဆန္ဒစာရင်းသို့ထည့်ပါ' },
                'Total': { en: 'Total', ur: 'کل', mm: 'စုစုပေါင်း' },
                'Place Order': { en: 'Place Order', ur: 'آرڈر دیں', mm: 'အော်ဒါတင်ပါ' },
                'Buy Now': { en: 'Buy Now', ur: 'ابھی خریدیں', mm: 'ယခုဝယ်ပါ' },
                'Add to Cart': { en: 'Add to Cart', ur: 'کارٹ میں شامل کریں', mm: 'စျေးခြင်းတောင်းသို့ထည့်ပါ' },
                'Seller': { en: 'Seller', ur: 'بیچنے والا', mm: 'ရောင်းချသူ' },
                'Store Settings': { en: 'Store Settings', ur: 'اسٹور ترتیبات', mm: 'ဆိုင်ဆက်တင်များ' },
                'Product Management': { en: 'Product Management', ur: 'پروڈکٹ مینجمنٹ', mm: 'ထုတ်ကုန်စီမံခန့်ခွဲမှု' },
                'Current Products': { en: 'Current Products', ur: 'موجودہ مصنوعات', mm: 'လက်ရှိထုတ်ကုန်များ' },
                'Address Book': { en: 'Address Book', ur: 'ایڈریس بک', mm: 'လိပ်စာစာအုပ်' },
                'Create Seller Account': { en: 'Create Seller Account', ur: 'سیلر اکاؤنٹ بنائیں', mm: 'ရောင်းချသူအကောင့်ဖန်တီးပါ' },
                'Pending Seller Accounts': { en: 'Pending Seller Accounts', ur: 'زیر التواء سیلر اکاؤنٹس', mm: 'ဆိုင်းငံ့ထားသော ရောင်းချသူအကောင့်များ' },
                'Create Customer Account': { en: 'Create Customer Account', ur: 'کسٹمر اکاؤنٹ بنائیں', mm: 'ဖောက်သည်အကောင့်ဖန်တီးပါ' },
                'Your Cart': { en: 'Your Cart', ur: 'آپ کی کارٹ', mm: 'သင့်စျေးခြင်းတောင်း' },
                'Clear Cart': { en: 'Clear Cart', ur: 'کارٹ صاف کریں', mm: 'စျေးခြင်းတောင်းရှင်းလင်းပါ' },
                'Order Now': { en: 'Order Now', ur: 'ابھی آرڈر کریں', mm: 'ယခုမှာယူပါ' },
                'Order Details': { en: 'Order Details', ur: 'آرڈر کی تفصیلات', mm: 'အော်ဒါအသေးစိတ်' },
                'Name': { en: 'Name', ur: 'نام', mm: 'နာမည်' },
                'Email': { en: 'Email', ur: 'ای میل', mm: 'အီးမေးလ်' },
                'Phone': { en: 'Phone', ur: 'فون', mm: 'ဖုန်း' },
                'Address': { en: 'Address', ur: 'پتہ', mm: 'လိပ်စာ' },
                'Order Summary': { en: 'Order Summary', ur: 'آرڈر کا خلاصہ', mm: 'အော်ဒါအကျဉ်းချုပ်' },
                'Admin Password Required': { en: 'Admin Password Required', ur: 'ایڈمن پاس ورڈ درکار ہے', mm: 'အက်ဒမင်စကားဝှက်လိုအပ်သည်' },
                'Enter password': { en: 'Enter password', ur: 'پاس ورڈ درج کریں', mm: 'စကားဝှက်ထည့်ပါ' },
                'Verify': { en: 'Verify', ur: 'تصدیق کریں', mm: 'အတည်ပြုပါ' },
                'Cancel': { en: 'Cancel', ur: 'منسوخ کریں', mm: 'ပယ်ဖျက်ပါ' },
                'Wrong password!': { en: 'Wrong password!', ur: 'غلط پاس ورڈ!', mm: 'စကားဝှက်မမှန်ကန်ပါ!' },
                'Add Product': { en: 'Add Product', ur: 'پروڈکٹ شامل کریں', mm: 'ထုတ်ကုန်ထည့်ပါ' },
                'Delete': { en: 'Delete', ur: 'حذف کریں', mm: 'ဖျက်မည်' },
                'Approve': { en: 'Approve', ur: 'منظور کریں', mm: 'အတည်ပြုပါ' },
                'Reject': { en: 'Reject', ur: 'مسترد کریں', mm: 'ငြင်းပယ်ပါ' },
                'Save Address': { en: 'Save Address', ur: 'پتہ محفوظ کریں', mm: 'လိပ်စာသိမ်းဆည်းပါ' },
                'Reset': { en: 'Reset', ur: 'ری سیٹ', mm: 'ပြန်လည်သတ်မှတ်ပါ' },
                'Create Account': { en: 'Create Account', ur: 'اکاؤنٹ بنائیں', mm: 'အကောင့်ဖန်တီးပါ' },
                'Home': { en: 'Home', ur: 'ہوم', mm: 'ပင်မစာမျက်နှာ' },
                'Settings': { en: 'Settings', ur: 'ترتیبات', mm: 'ဆက်တင်များ' },
                'Login': { en: 'Login', ur: 'لاگ ان', mm: 'ဝင်ရောက်ပါ' },
                'Logout': { en: 'Logout', ur: 'لاگ آؤٹ', mm: 'ထွက်ပါ' },
                'Your Profile': { en: 'Your Profile', ur: 'آپ کا پروفائل', mm: 'သင့်ပရိုဖိုင်' },
                'Save Profile': { en: 'Save Profile', ur: 'پروفائل محفوظ کریں', mm: 'ပရိုဖိုင်သိမ်းဆည်းပါ' },
                'Profile ID': { en: 'Profile ID', ur: 'پروفائل آئی ڈی', mm: 'ပရိုဖိုင် ID' },
                'Invalid login credentials': { en: 'Invalid login credentials', ur: 'غلط لاگ ان معلومات', mm: 'မမှန်ကန်သော ဝင်ရောက်မှုအချက်အလက်များ' }
            };
            return translations[key]?.[currentLanguage] || key;
        }

        function updateLanguage() {
            document.querySelectorAll('[data-en], [data-ur], [data-mm]').forEach(el => {
                const text = el.dataset[currentLanguage] || el.dataset.en;
                if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                    el.placeholder = text;
                } else {
                    el.textContent = text;
                }
            });
            document.title = `${settings.storeName} — ${getTranslatedMessage('Ecommerce')}`;
            renderProducts();
            renderAdminProducts();
            renderPendingSellers();
            renderCart();
            renderWishList();
        }

        // === Section Toggle ===
        function toggleSection(sectionId) {
            const sections = ['storeSettingsSection', 'userProfileSection', 'adminPanelSection', 'createSellerSection', 'addressBookSection'];
            sections.forEach(id => {
                document.getElementById(id).style.display = id === sectionId ? (document.getElementById(id).style.display === 'block' ? 'none' : 'block') : 'none';
            });
            if (sectionId === 'userProfileSection') loadProfile();
            if (sectionId === 'adminPanelSection') document.getElementById('productManagement').style.display = 'block';
        }

        // === Store Settings ===
        function saveStoreSettings() {
            settings.storeName = document.getElementById('setStoreName').value.trim() || 'Sharif.com';
            settings.currency = document.getElementById('setCurrency').value.trim() || '₹';
            settings.notice = document.getElementById('setNotice').value.trim();
            localStorage.setItem('settings', JSON.stringify(settings));
            updateStoreName();
            alert(getTranslatedMessage('Settings saved successfully!'));
        }

        function resetStoreSettings() {
            if (confirm(getTranslatedMessage('Are you sure you want to reset settings?'))) {
                settings = { storeName: 'Sharif.com', currency: '₹', notice: '' };
                localStorage.setItem('settings', JSON.stringify(settings));
                document.getElementById('setStoreName').value = settings.storeName;
                document.getElementById('setCurrency').value = settings.currency;
                document.getElementById('setNotice').value = '';
                updateStoreName();
                alert(getTranslatedMessage('Settings reset!'));
            }
        }

        function updateStoreName() {
            document.getElementById('storeName').textContent = settings.storeName;
            document.title = `${settings.storeName} — ${getTranslatedMessage('Ecommerce')}`;
        }

        // === Product Management ===
        function setupImagePreview() {
            document.getElementById('imageFileInput').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function() {
                        document.getElementById('imagePreview').src = reader.result;
                        document.getElementById('imagePreview').style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                }
            });
            document.getElementById('imageUrlInput').addEventListener('input', function() {
                const url = this.value.trim();
                if (url) {
                    document.getElementById('imagePreview').src = url;
                    document.getElementById('imagePreview').style.display = 'block';
                } else {
                    document.getElementById('imagePreview').style.display = 'none';
                }
            });
        }

        async function addProduct() {
            const title = document.getElementById('adminTitle').value.trim();
            const brand = document.getElementById('adminBrand').value.trim();
            const description = document.getElementById('adminDescription').value.trim();
            const price = parseFloat(document.getElementById('adminPrice').value);
            const fileInput = document.getElementById('imageFileInput').files[0];
            const urlInput = document.getElementById('imageUrlInput').value.trim();

            if (!title || !brand || !description || isNaN(price) || price <= 0 || (!fileInput && !urlInput)) {
                alert(getTranslatedMessage('Please fill all required fields and enter a valid price or image'));
                return;
            }

            let image = urlInput;
            if (fileInput) {
                const reader = new FileReader();
                reader.onload = async () => {
                    image = reader.result;
                    await createProduct(title, brand, description, price, image);
                };
                reader.readAsDataURL(fileInput);
            } else {
                await createProduct(title, brand, description, price, image);
            }
        }

        async function createProduct(title, brand, description, price, image) {
            const newProduct = {
                title: `${brand} ${title}`,
                description,
                price,
                image,
                brand,
                seller: 'admin',
                reviews: []
            };
            await saveProductToAPI(newProduct);
            renderProducts();
            renderAdminProducts();
            resetProductForm();
            alert(getTranslatedMessage('Product added successfully!'));
        }

        function renderProducts() {
            const productsGrid = document.getElementById('productsGrid');
            productsGrid.innerHTML = '';
            const searchTerm = document.getElementById('searchInput')?.value.toLowerCase() || '';
            const filter = document.getElementById('filterSelect')?.value || 'all';

            let filteredProducts = products.filter(p =>
                p.title.toLowerCase().includes(searchTerm) ||
                p.description.toLowerCase().includes(searchTerm)
            );

            if (filter === 'priceLow') filteredProducts.sort((a, b) => a.price - b.price);
            else if (filter === 'priceHigh') filteredProducts.sort((a, b) => b.price - a.price);

            if (filteredProducts.length === 0) {
                productsGrid.innerHTML = `<p>${getTranslatedMessage('No products available.')}</p>`;
                return;
            }

            filteredProducts.forEach((product) => {
                const productCard = document.createElement('div');
                productCard.className = 'card';
                productCard.innerHTML = `
                    <img src="${product.image}" alt="${product.title}" onerror="this.src='https://via.placeholder.com/300'">
                    <div class="title">${product.title}</div>
                    <div class="description">${product.description}</div>
                    <div class="price">${settings.currency}${product.price.toLocaleString()}</div>
                    <div>${getTranslatedMessage('Seller')}: ${product.seller}</div>
                    <div class="product-actions">
                        <button class="btn" onclick="addToCart('${product.id}')">${getTranslatedMessage('Add to Cart')}</button>
                        <button class="btn success" onclick="showOrderForm('${product.id}')">${getTranslatedMessage('Buy Now')}</button>
                        <button class="btn ghost" onclick="addToWishList('${product.id}')">${getTranslatedMessage('Add to Wishlist')}</button>
                    </div>
                    <div class="review-section">
                        <h4>Reviews</h4>
                        ${product.reviews.map(r => `
                            <div class="review">
                                <strong>${r.customer}</strong>: ${r.comment} (${r.rating}/5)
                            </div>
                        `).join('')}
                        <form onsubmit="addReview(event, '${product.id}')" class="review-form">
                            <input type="text" placeholder="${getTranslatedMessage('Your Name')}" required>
                            <textarea placeholder="${getTranslatedMessage('Your Review')}" required></textarea>
                            <select required>
                                <option value="">${getTranslatedMessage('Rating')}</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                            </select>
                            <button class="btn">${getTranslatedMessage('Submit Review')}</button>
                        </form>
                    </div>
                `;
                productsGrid.appendChild(productCard);
            });
        }

        function renderAdminProducts() {
            const adminProductList = document.getElementById('adminProductList');
            adminProductList.innerHTML = '';
            products.forEach((product) => {
                const productCard = document.createElement('div');
                productCard.className = 'card';
                productCard.innerHTML = `
                    <img src="${product.image}" alt="${product.title}" onerror="this.src='https://via.placeholder.com/300'">
                    <div class="title">${product.title}</div>
                    <div class="description">${product.description}</div>
                    <div class="price">${settings.currency}${product.price.toLocaleString()}</div>
                    <div class="product-actions">
                        <button class="btn danger" onclick="deleteProduct('${product.id}')">${getTranslatedMessage('Delete')}</button>
                    </div>
                `;
                adminProductList.appendChild(productCard);
            });
        }

        async function deleteProduct(productId) {
            if (confirm(getTranslatedMessage('Are you sure you want to delete this product?'))) {
                try {
                    await fetch(`${PRODUCTS_API}/${productId}`, {
                        method: 'DELETE',
                        headers: { Authorization: `Bearer ${API_KEY}` }
                    });
                    await loadProductsFromAPI();
                    renderProducts();
                    renderAdminProducts();
                    alert(getTranslatedMessage('Product deleted successfully!'));
                } catch (error) {
                    console.error('Error deleting product:', error);
                }
            }
        }

        function resetProductForm() {
            document.getElementById('adminTitle').value = '';
            document.getElementById('adminBrand').value = '';
            document.getElementById('adminDescription').value = '';
            document.getElementById('adminPrice').value = '';
            document.getElementById('imageFileInput').value = '';
            document.getElementById('imageUrlInput').value = '';
            document.getElementById('imagePreview').src = '';
            document.getElementById('imagePreview').style.display = 'none';
        }

        // === Cart Management ===
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) {
                alert(getTranslatedMessage('Product not found!'));
                return;
            }
            const existingItem = cart.find(item => item.productId === productId);
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({ productId, quantity: 1 });
            }
            saveCart();
            renderCart();
            alert(getTranslatedMessage('Product added to cart!'));
        }

        function renderCart() {
            const cartItems = document.getElementById('cartItems');
            cartItems.innerHTML = '';
            let total = 0;

            cart.forEach((item) => {
                const product = products.find(p => p.id === item.productId);
                if (!product) return;
                const itemTotal = product.price * item.quantity;
                total += itemTotal;
                const cartItem = document.createElement('div');
                cartItem.className = 'card';
                cartItem.innerHTML = `
                    <img src="${product.image}" alt="${product.title}" style="height: 100px;" onerror="this.src='https://via.placeholder.com/100'">
                    <div class="title">${product.title}</div>
                    <div class="price">${settings.currency}${itemTotal.toLocaleString()} (${item.quantity}x)</div>
                    <div class="product-actions">
                        <input type="number" value="${item.quantity}" min="1" onchange="updateQuantity('${item.productId}', this.value)" style="width: 60px;">
                        <button class="btn danger" onclick="removeFromCart('${item.productId}')">Remove</button>
                    </div>
                `;
                cartItems.appendChild(cartItem);
            });

            document.getElementById('cartTotal').textContent = `${getTranslatedMessage('Total')}: ${settings.currency}${total.toLocaleString()}`;
            document.getElementById('orderDetails').value = cart.map(item => {
                const product = products.find(p => p.id === item.productId);
                return product ? `${product.title} x ${item.quantity} = ${settings.currency}${product.price * item.quantity}` : '';
            }).filter(Boolean).join('\n');
            document.getElementById('orderTotal').value = `${settings.currency}${total.toLocaleString()}`;
        }

        function updateQuantity(productId, quantity) {
            quantity = parseInt(quantity);
            if (quantity >= 1) {
                const item = cart.find(i => i.productId === productId);
                if (item) {
                    item.quantity = quantity;
                    saveCart();
                    renderCart();
                }
            }
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.productId !== productId);
            saveCart();
            renderCart();
        }

        function clearCart() {
            if (confirm(getTranslatedMessage('Are you sure you want to clear the cart?'))) {
                cart = [];
                saveCart();
                renderCart();
            }
        }

        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

      // === Order Management (Continued) ===
function showOrderForm(productId = null) {
    if (productId !== null) {
        const product = products.find(p => p.id === productId);
        if (product) {
            cart = [{ productId, quantity: 1 }];
            saveCart();
            renderCart();
        }
    }
    
    // Fill form with user data if available
    if (currentUser) {
        document.getElementById('orderName').value = currentUser.name || '';
        document.getElementById('orderEmail').value = currentUser.email || '';
        document.getElementById('orderPhone').value = currentUser.phone || '';
        document.getElementById('orderAddress').value = currentUser.address || '';
    }
    
    // Update order summary
    document.getElementById('orderSummary').innerHTML = document.getElementById('orderDetails').value
        .split('\n')
        .map(item => `<div>${item}</div>`)
        .join('');
    
    document.getElementById('orderForm').style.display = 'flex';
}

function hideOrderForm() {
    document.getElementById('orderForm').style.display = 'none';
}

async function submitOrder(event) {
    event.preventDefault();
    
    const orderData = {
        name: document.getElementById('orderName').value.trim(),
        email: document.getElementById('orderEmail').value.trim(),
        phone: document.getElementById('orderPhone').value.trim(),
        address: document.getElementById('orderAddress').value.trim(),
        order_details: document.getElementById('orderDetails').value,
        order_total: document.getElementById('orderTotal').value
    };
    
    // Validate required fields
    if (!orderData.name || !orderData.email || !orderData.phone || !orderData.address) {
        alert(getTranslatedMessage('Please fill all required fields'));
        return;
    }
    
    try {
        // Save order to API
        const orderResponse = await saveOrderToAPI(orderData);
        
        // Save customer if not exists
        const customerExists = customers.some(c => c.email === orderData.email);
        if (!customerExists) {
            const customerData = {
                name: orderData.name,
                email: orderData.email,
                phone: orderData.phone,
                address: orderData.address,
                password: Math.random().toString(36).slice(-8) // Generate random password
            };
            await saveCustomerToAPI(customerData);
            customers.push(customerData);
            localStorage.setItem('customers', JSON.stringify(customers));
        }
        
        // Send email confirmation
        try {
            await emailjs.send('service_your_service_id', 'template_your_template_id', {
                to_name: orderData.name,
                to_email: orderData.email,
                order_details: orderData.order_details,
                order_total: orderData.order_total,
                store_name: settings.storeName
            });
            alert(getTranslatedMessage('Order placed successfully! We will contact you soon.'));
        } catch (emailError) {
            console.error('Email sending failed:', emailError);
            alert(getTranslatedMessage('Order placed but email failed'));
        }
        
        // Clear cart and close form
        cart = [];
        saveCart();
        renderCart();
        hideOrderForm();
    } catch (error) {
        console.error('Error submitting order:', error);
        alert('Error placing order. Please try again.');
    }
}

// Attach form submit event
document.getElementById('orderFormDetails').addEventListener('submit', submitOrder);

// === Seller Management ===
function nextSellerStep(currentStep, nextStep) {
    document.getElementById(`sellerStep${currentStep}`).classList.remove('active');
    document.getElementById(`sellerStep${nextStep}`).classList.add('active');
}

function prevSellerStep(currentStep, prevStep) {
    document.getElementById(`sellerStep${currentStep}`).classList.remove('active');
    document.getElementById(`sellerStep${prevStep}`).classList.add('active');
}

async function createSellerAccount() {
    const sellerData = {
        name: document.getElementById('sellerName').value.trim(),
        email: document.getElementById('sellerEmail').value.trim(),
        phone: document.getElementById('sellerPhone').value.trim(),
        address: document.getElementById('sellerAddress').value.trim(),
        bank: document.getElementById('sellerBank').value.trim(),
        id: document.getElementById('sellerID').value.trim(),
        status: 'pending'
    };
    
    // Validate required fields
    if (!sellerData.name || !sellerData.email || !sellerData.phone || !sellerData.address) {
        alert(getTranslatedMessage('Please fill all required fields'));
        return;
    }
    
    // Validate email format
    if (!/^\S+@\S+\.\S+$/.test(sellerData.email)) {
        alert(getTranslatedMessage('Invalid email format'));
        return;
    }
    
    // Validate phone number
    if (!/^[0-9]{10,15}$/.test(sellerData.phone)) {
        alert(getTranslatedMessage('Invalid phone number'));
        return;
    }
    
    // Check if email already exists
    if (pendingSellers.some(s => s.email === sellerData.email) || 
        approvedSellers.some(s => s.email === sellerData.email)) {
        alert(getTranslatedMessage('Email already registered!'));
        return;
    }
    
    try {
        // Save to API
        await saveSellerToAPI(sellerData);
        
        // Add to pending sellers
        pendingSellers.push(sellerData);
        localStorage.setItem('pendingSellers', JSON.stringify(pendingSellers));
        
        // Send email (simulated)
        try {
            await emailjs.send('service_your_service_id', 'template_seller_request', {
                to_name: sellerData.name,
                to_email: sellerData.email,
                store_name: settings.storeName
            });
            alert(getTranslatedMessage('Seller account request submitted! Wait for admin approval.'));
        } catch (emailError) {
            console.error('Email sending failed:', emailError);
            alert(getTranslatedMessage('Request submitted but email failed'));
        }
        
        // Reset form
        document.getElementById('sellerName').value = '';
        document.getElementById('sellerEmail').value = '';
        document.getElementById('sellerPhone').value = '';
        document.getElementById('sellerAddress').value = '';
        document.getElementById('sellerBank').value = '';
        document.getElementById('sellerID').value = '';
        nextSellerStep(2, 1); // Go back to step 1
    } catch (error) {
        console.error('Error creating seller account:', error);
        alert('Error submitting request. Please try again.');
    }
}

function renderPendingSellers() {
    const pendingSellersContainer = document.getElementById('pendingSellers');
    pendingSellersContainer.innerHTML = '';
    
    if (pendingSellers.length === 0) {
        pendingSellersContainer.innerHTML = `<p>${getTranslatedMessage('No pending seller accounts')}</p>`;
        return;
    }
    
    pendingSellers.forEach((seller, index) => {
        const sellerCard = document.createElement('div');
        sellerCard.className = 'card';
        sellerCard.innerHTML = `
            <h4>${seller.name}</h4>
            <p>Email: ${seller.email}</p>
            <p>Phone: ${seller.phone}</p>
            <p>Status: ${seller.status}</p>
            <div class="product-actions">
                <button class="btn success" onclick="approveSeller(${index})">${getTranslatedMessage('Approve')}</button>
                <button class="btn danger" onclick="rejectSeller(${index})">${getTranslatedMessage('Reject')}</button>
            </div>
        `;
        pendingSellersContainer.appendChild(sellerCard);
    });
}

async function approveSeller(index) {
    const seller = pendingSellers[index];
    seller.status = 'approved';
    
    try {
        // Update in API
        await saveSellerToAPI(seller);
        
        // Move to approved sellers
        approvedSellers.push(seller);
        pendingSellers.splice(index, 1);
        
        // Update local storage
        localStorage.setItem('pendingSellers', JSON.stringify(pendingSellers));
        localStorage.setItem('approvedSellers', JSON.stringify(approvedSellers));
        
        // Send approval email (simulated)
        try {
            await emailjs.send('service_your_service_id', 'template_seller_approved', {
                to_name: seller.name,
                to_email: seller.email,
                store_name: settings.storeName
            });
            alert(getTranslatedMessage('Seller account approved and email sent!'));
        } catch (emailError) {
            console.error('Email sending failed:', emailError);
            alert(getTranslatedMessage('Seller account approved but email failed'));
        }
        
        renderPendingSellers();
    } catch (error) {
        console.error('Error approving seller:', error);
        alert('Error approving seller. Please try again.');
    }
}

async function rejectSeller(index) {
    const seller = pendingSellers[index];
    
    if (confirm(`Are you sure you want to reject ${seller.name}'s application?`)) {
        try {
            // Send rejection email (simulated)
            try {
                await emailjs.send('service_your_service_id', 'template_seller_rejected', {
                    to_name: seller.name,
                    to_email: seller.email,
                    store_name: settings.storeName
                });
                alert(getTranslatedMessage('Seller account rejected and email sent!'));
            } catch (emailError) {
                console.error('Email sending failed:', emailError);
                alert(getTranslatedMessage('Seller account rejected but email failed'));
            }
            
            // Remove from pending sellers
            pendingSellers.splice(index, 1);
            localStorage.setItem('pendingSellers', JSON.stringify(pendingSellers));
            
            renderPendingSellers();
        } catch (error) {
            console.error('Error rejecting seller:', error);
            alert('Error rejecting seller. Please try again.');
        }
    }
}

// === User Authentication ===
function showLoginForm() {
    document.getElementById('loginForm').style.display = 'flex';
}

function hideLoginForm() {
    document.getElementById('loginForm').style.display = 'none';
}

async function loginUser() {
    const email = document.getElementById('loginEmail').value.trim();
    const password = document.getElementById('loginPassword').value.trim();
    
    // Check admin login
    if (email === ADMIN_EMAIL && password === ADMIN_PASSWORD) {
        isAdmin = true;
        currentUser = { name: 'Admin', email: ADMIN_EMAIL, isAdmin: true };
        localStorage.setItem('isAdmin', 'true');
        localStorage.setItem('currentUser', JSON.stringify(currentUser));
        updateUserInterface();
        hideLoginForm();
        return;
    }
    
    // Check customer login
    const customer = customers.find(c => c.email === email && c.password === password);
    if (customer) {
        isAdmin = false;
        currentUser = customer;
        localStorage.setItem('isAdmin', 'false');
        localStorage.setItem('currentUser', JSON.stringify(currentUser));
        updateUserInterface();
        hideLoginForm();
        return;
    }
    
    alert(getTranslatedMessage('Invalid login credentials'));
}

function logoutUser() {
    isAdmin = false;
    currentUser = null;
    localStorage.removeItem('isAdmin');
    localStorage.removeItem('currentUser');
    updateUserInterface();
}

function updateUserInterface() {
    const loginBtn = document.getElementById('loginBtn');
    const adminPanelBtn = document.getElementById('adminPanelBtn');
    
    if (currentUser) {
        loginBtn.textContent = getTranslatedMessage('Logout');
        loginBtn.onclick = logoutUser;
        
        if (isAdmin) {
            adminPanelBtn.style.display = 'block';
        } else {
            adminPanelBtn.style.display = 'none';
        }
    } else {
        loginBtn.textContent = getTranslatedMessage('Login');
        loginBtn.onclick = showLoginForm;
        adminPanelBtn.style.display = 'none';
    }
}

// === Wishlist Management ===
function addToWishList(productId) {
    const product = products.find(p => p.id === productId);
    if (!product) return;
    
    if (wishList.some(id => id === productId)) {
        alert(getTranslatedMessage('Product already in wishlist!'));
        return;
    }
    
    wishList.push(productId);
    localStorage.setItem('wishList', JSON.stringify(wishList));
    renderWishList();
    alert(getTranslatedMessage('Product added to wishlist!'));
}

function removeFromWishList(productId) {
    wishList = wishList.filter(id => id !== productId);
    localStorage.setItem('wishList', JSON.stringify(wishList));
    renderWishList();
}

function renderWishList() {
    const wishListContainer = document.getElementById('wishList');
    wishListContainer.innerHTML = '';
    
    if (wishList.length === 0) {
        wishListContainer.innerHTML = `<p>${getTranslatedMessage('Wishlist is empty')}</p>`;
        return;
    }
    
    wishListContainer.innerHTML = `<h3>${getTranslatedMessage('Wishlist')}</h3>`;
    
    wishList.forEach(productId => {
        const product = products.find(p => p.id === productId);
        if (!product) return;
        
        const productCard = document.createElement('div');
        productCard.className = 'card';
        productCard.innerHTML = `
            <img src="${product.image}" alt="${product.title}" style="height: 100px;" onerror="this.src='https://via.placeholder.com/100'">
            <div class="title">${product.title}</div>
            <div class="price">${settings.currency}${product.price.toLocaleString()}</div>
            <div class="product-actions">
                <button class="btn" onclick="addToCart('${product.id}')">${getTranslatedMessage('Add to Cart')}</button>
                <button class="btn danger" onclick="removeFromWishList('${product.id}')">${getTranslatedMessage('Remove')}</button>
            </div>
        `;
        wishListContainer.appendChild(productCard);
    });
}

// === Review Management ===
function addReview(event, productId) {
    event.preventDefault();
    
    const form = event.target;
    const name = form.querySelector('input[type="text"]').value.trim();
    const comment = form.querySelector('textarea').value.trim();
    const rating = form.querySelector('select').value;
    
    if (!name || !comment || !rating) {
        alert(getTranslatedMessage('Please fill all review fields'));
        return;
    }
    
    const product = products.find(p => p.id === productId);
    if (!product) return;
    
    product.reviews.push({
        customer: name,
        comment,
        rating: parseInt(rating),
        date: new Date().toLocaleDateString()
    });
    
    // In a real app, you would save to API here
    alert(getTranslatedMessage('Review submitted successfully!'));
    form.reset();
    renderProducts();
}

// === Address Book ===
function saveAddress() {
    const addressData = {
        name: document.getElementById('custName').value.trim(),
        email: document.getElementById('custEmail').value.trim(),
        phone: document.getElementById('custPhone').value.trim(),
        address: document.getElementById('custAddress').value.trim()
    };
    
    if (!addressData.name || !addressData.email || !addressData.phone || !addressData.address) {
        alert(getTranslatedMessage('Please fill all required fields'));
        return;
    }
    
    addresses.push(addressData);
    localStorage.setItem('addresses', JSON.stringify(addresses));
    alert(getTranslatedMessage('Address saved successfully!'));
}

function resetAddress() {
    document.getElementById('custName').value = '';
    document.getElementById('custEmail').value = '';
    document.getElementById('custPhone').value = '';
    document.getElementById('custAddress').value = '';
}

// === Password Prompt ===
function showPasswordPrompt(action) {
    currentAction = action;
    document.getElementById('passwordPrompt').style.display = 'flex';
    document.getElementById('adminPasswordInput').value = '';
    document.getElementById('passwordError').style.display = 'none';
}

function hidePasswordPrompt() {
    document.getElementById('passwordPrompt').style.display = 'none';
}

function verifyPassword() {
    const password = document.getElementById('adminPasswordInput').value;
    
    if (password === ADMIN_PASSWORD) {
        hidePasswordPrompt();
        
        if (currentAction === 'addProduct') {
            addProduct();
        }
        // Add more actions here as needed
    } else {
        document.getElementById('passwordError').style.display = 'block';
    }
}

// === UI Functions ===
function toggleMenu() {
    const menu = document.getElementById('threeLineMenu');
    menu.classList.toggle('active');
}

function toggleCart() {
    const cartPanel = document.getElementById('cartPanel');
    cartPanel.style.display = cartPanel.style.display === 'block' ? 'none' : 'block';
}

function showPage(pageId) {
    document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
    });
    document.getElementById(`page${pageId.charAt(0).toUpperCase() + pageId.slice(1)}`).classList.add('active');
    document.getElementById('threeLineMenu').classList.remove('active');
}

function setupSearchAndFilter() {
    document.getElementById('searchInput').addEventListener('input', renderProducts);
    document.getElementById('filterSelect').addEventListener('change', renderProducts);
}

// === Profile Management ===
function loadProfile() {
    if (currentUser) {
        document.getElementById('profileNameInput').value = currentUser.name || '';
        document.getElementById('profileEmailInput').value = currentUser.email || '';
        document.getElementById('profilePhoneInput').value = currentUser.phone || '';
        document.getElementById('profileAddressInput').value = currentUser.address || '';
        document.getElementById('profilePasswordInput').value = '';
        
        document.getElementById('profileDisplay').style.display = 'none';
        document.getElementById('profileForm').style.display = 'block';
    }
}

async function saveProfile() {
    const profileData = {
        name: document.getElementById('profileNameInput').value.trim(),
        email: document.getElementById('profileEmailInput').value.trim(),
        phone: document.getElementById('profilePhoneInput').value.trim(),
        address: document.getElementById('profileAddressInput').value.trim(),
        password: document.getElementById('profilePasswordInput').value.trim()
    };
    
    if (!profileData.name || !profileData.email) {
        alert(getTranslatedMessage('Please fill all required fields'));
        return;
    }
    
    // Validate email format
    if (!/^\S+@\S+\.\S+$/.test(profileData.email)) {
        alert(getTranslatedMessage('Invalid email format'));
        return;
    }
    
    // Validate phone number
    if (profileData.phone && !/^[0-9]{10,15}$/.test(profileData.phone)) {
        alert(getTranslatedMessage('Invalid phone number'));
        return;
    }
    
    try {
        // Save to API
        await saveCustomerToAPI(profileData);
        
        // Update current user
        currentUser = profileData;
        localStorage.setItem('currentUser', JSON.stringify(currentUser));
        
        // Update customers list
        const existingCustomerIndex = customers.findIndex(c => c.email === profileData.email);
        if (existingCustomerIndex >= 0) {
            customers[existingCustomerIndex] = profileData;
        } else {
            customers.push(profileData);
        }
        localStorage.setItem('customers', JSON.stringify(customers));
        
        alert(getTranslatedMessage('Profile saved successfully!'));
    } catch (error) {
        console.error('Error saving profile:', error);
        alert('Error saving profile. Please try again.');
    }
}

// Initialize the app
document.addEventListener('DOMContentLoaded', async () => {
    updateStoreName();
    setupLanguageButtons();
    setupImagePreview();
    await loadProductsFromAPI();
    renderProducts();
    renderAdminProducts();
    renderPendingSellers();
    renderCart();
    renderWishList();
    setupSearchAndFilter();
    updateUserInterface();
    updateLanguage();
    
    // Set body direction based on language
    document.body.dir = currentLanguage === 'ur' ? 'rtl' : 'ltr';
});
</style>
 </body>
</html>
